1
00:00:00,401 --> 00:00:04,135
[MUSIC]

2
00:00:04,204 --> 00:00:07,305
斯坦福大学

3
00:00:07,373 --> 00:00:11,475
>> 欢迎来到斯坦福CS193P，

4
00:00:11,544 --> 00:00:14,311
iOS冬季应用程序2017。

5
00:00:14,380 --> 00:00:16,180
这是15号讲座，我想。

6
00:00:17,716 --> 00:00:19,015
是的，14，这样的东西。

7
00:00:19,083 --> 00:00:21,717
今天是全部演示。

8
00:00:21,786 --> 00:00:24,720
我们要做一个动画动画的演示。

9
00:00:24,789 --> 00:00:26,988
而且我会去推动行为，而且

10
00:00:27,057 --> 00:00:29,958
碰撞行为和动态项目行为，

11
00:00:30,026 --> 00:00:32,793
碰撞代理，重力行为等

12
00:00:32,862 --> 00:00:34,862
我不会回到幻灯片。

13
00:00:34,931 --> 00:00:37,597
所以，让我谈谈现在是什么，我们是什么

14
00:00:37,666 --> 00:00:39,032
本周没有部分

15
00:00:39,101 --> 00:00:39,932
然后下周，

16
00:00:40,001 --> 00:00:42,435
我实际上张贴了我下周会谈的内容。

17
00:00:42,504 --> 00:00:45,504
但它是应用程序的生命周期，警报和动作

18
00:00:45,573 --> 00:00:49,542
床单，隔断，甚至可以获得核心运动，以适应在那里。

19
00:00:49,610 --> 00:00:52,644
我会尽量覆盖一般的基础设施

20
00:00:52,713 --> 00:00:55,180
可以帮助你的东西，随你的任务。

21
00:00:56,449 --> 00:01:00,251
好的，让我们来看看演示。

22
00:01:00,319 --> 00:01:05,723
而现在，我们正在演示动态动画制作。

23
00:01:05,791 --> 00:01:09,259
一般来说，动态动画主要用于

24
00:01:09,328 --> 00:01:13,062
通常在您的UI中正式发生的事情。

25
00:01:13,131 --> 00:01:15,831
当我从底部向上滑动时，我使用这个例子

26
00:01:15,900 --> 00:01:19,034
在你的iPhone上，它带来了一点UI界面。

27
00:01:19,103 --> 00:01:22,170
它有点反弹，然后稳定下来。

28
00:01:22,239 --> 00:01:26,541
这是真正的动态动画类型

29
00:01:26,610 --> 00:01:28,410
你不会用它来构建一个视频游戏，

30
00:01:28,411 --> 00:01:30,211
最多。

31
00:01:30,280 --> 00:01:32,846
即使这是我今天要做的演示。

32
00:01:32,915 --> 00:01:34,782
还有其他的东西像间谍小孩和

33
00:01:34,851 --> 00:01:37,117
像你可能会使用的东西。

34
00:01:37,185 --> 00:01:40,320
但是我喜欢做这个视频游戏，因为这很有趣

35
00:01:40,389 --> 00:01:43,589
这也是我快速密集的机会

36
00:01:43,658 --> 00:01:46,458
告诉你很多不同的行为和

37
00:01:46,527 --> 00:01:47,793
他们如何工作

38
00:01:47,861 --> 00:01:52,797
所以，我们要建立一个太空游戏，小行星游戏。

39
00:01:52,866 --> 00:01:55,400
我们将要有一个小行星飞过的领域

40
00:01:55,469 --> 00:01:57,335
我们将在中间有一艘船

41
00:01:57,404 --> 00:01:58,970
我们的船会有一些盾牌。

42
00:01:59,038 --> 00:02:01,405
每当小行星击中盾牌时，

43
00:02:01,474 --> 00:02:03,674
盾牌会打开并耗尽。

44
00:02:03,742 --> 00:02:06,443
最终我们的船可能会被毁坏

45
00:02:06,512 --> 00:02:08,077
从太多的小行星命中。

46
00:02:08,146 --> 00:02:10,880
而且，我们将能够做所有这些行为

47
00:02:10,949 --> 00:02:11,747
前面提到过。

48
00:02:11,815 --> 00:02:15,984
所以，让我们开始在这里，我要创建一个新的应用程序。

49
00:02:17,087 --> 00:02:21,756
我会把这个应用程序称为小行星

50
00:02:21,825 --> 00:02:25,193
我们将使其在iPad和所有iPhone上都可以工作。

51
00:02:25,261 --> 00:02:27,260
这对于这个没有问题

52
00:02:27,329 --> 00:02:29,729
我会把它放在我总是把所有东西放在同一个地方。

53
00:02:29,798 --> 00:02:32,164
现在我想集中我所有的

54
00:02:32,233 --> 00:02:35,034
演示时间在这里动态动画的东西。

55
00:02:35,103 --> 00:02:37,603
所以，这是我实际上有一些演示之一

56
00:02:37,672 --> 00:02:40,572
代码和一些东西我会拖进去。

57
00:02:40,641 --> 00:02:43,208
我会向你简要介绍一下，但它大多只是

58
00:02:43,277 --> 00:02:47,078
画东西，画船，画小行星。

59
00:02:47,146 --> 00:02:49,380
而且，我们要做的所有动画，

60
00:02:49,449 --> 00:02:53,483
其中100％将在我在演示中做的代码中。

61
00:02:53,552 --> 00:02:57,254
所以，让我们开始把这些东西转移出去

62
00:02:57,322 --> 00:03:01,125
正如我们通常所做的，把这些东西放在支持文件中。

63
00:03:01,193 --> 00:03:05,728
只是为了清理我们在这里看的东西。

64
00:03:05,797 --> 00:03:07,564
我甚至会把主要故事板放在这里。

65
00:03:07,632 --> 00:03:10,966
现在，我已经把XC资产从支持文件中删除了

66
00:03:11,035 --> 00:03:12,401
Cuz我实际上有一些资产，一些图像

67
00:03:12,402 --> 00:03:13,768
时间。

68
00:03:13,838 --> 00:03:16,905
资产，特别是我的小行星和我的船。

69
00:03:16,974 --> 00:03:21,175
所以，让我们把它们拖出来，所以我要去这里去

70
00:03:21,244 --> 00:03:23,177
这个小目录我有东西。

71
00:03:23,246 --> 00:03:26,013
你可以看到我有一些随机图片

72
00:03:26,082 --> 00:03:27,047
的小行星在这里。

73
00:03:27,115 --> 00:03:29,715
我要拿这些小行星和

74
00:03:29,784 --> 00:03:31,684
将它们添加到我的图像在这里。

75
00:03:31,753 --> 00:03:33,385
我要做爆炸，

76
00:03:33,454 --> 00:03:36,321
我的船也知道如何爆炸，所以我们会这样。

77
00:03:36,390 --> 00:03:37,555
然后这是我的船，

78
00:03:37,624 --> 00:03:40,892
可爱的小船，这里是它的地方，它的发动机正在射击。

79
00:03:40,961 --> 00:03:43,460
好的，所以我们有那两个图像。

80
00:03:43,529 --> 00:03:47,398
现在，当您将图片拖入XE资源时，您会看到这些

81
00:03:47,467 --> 00:03:51,168
他们有一次，两次，三次。

82
00:03:51,237 --> 00:03:53,737
那就是在谈论这个决议。

83
00:03:53,805 --> 00:03:56,072
好的，这真的在说每个像素的数量

84
00:03:56,141 --> 00:03:57,339
点，好吗？

85
00:03:57,408 --> 00:03:59,007
在图像的大小。

86
00:03:59,076 --> 00:04:00,208
通常你会有三个。

87
00:04:00,277 --> 00:04:03,011
我只会使用1x，因为我的1x很高

88
00:04:03,080 --> 00:04:05,746
分辨率，2x和3x将会看起来很好。

89
00:04:05,815 --> 00:04:07,114
但是如果你有一个真正的应用程序，

90
00:04:07,183 --> 00:04:09,784
你想选择这些不同大小的分辨率。

91
00:04:09,852 --> 00:04:12,987
因为它允许一个X应用程序小得多，

92
00:04:13,055 --> 00:04:16,156
cuz显然较低的分辨率要小得多。

93
00:04:16,224 --> 00:04:17,824
实际上真的很酷

94
00:04:17,893 --> 00:04:19,325
人们从App Store下载东西。

95
00:04:19,394 --> 00:04:22,228
你只能得到适合的决议

96
00:04:22,296 --> 00:04:22,828
为您的设备。

97
00:04:22,896 --> 00:04:23,862
所以，这很有趣。

98
00:04:23,931 --> 00:04:25,797
你不会得到你不需要的那些额外的垃圾。

99
00:04:26,832 --> 00:04:28,666
所以无论如何，所以那些是我的形象。

100
00:04:28,735 --> 00:04:30,567
然后我也有一点代码，

101
00:04:30,636 --> 00:04:32,202
至少有四个文件。

102
00:04:32,271 --> 00:04:35,138
就像我说的，我们来看看这里。

103
00:04:35,207 --> 00:04:40,010
拖那些，我们将复制它们，是的。

104
00:04:41,413 --> 00:04:42,311
好的，让我们来看看

105
00:04:42,379 --> 00:04:43,846
我们刚刚拖在那里的代码。

106
00:04:45,515 --> 00:04:47,448
第一个是小行星视图。

107
00:04:47,517 --> 00:04:49,784
这是你在屏幕上看到的整个事情

108
00:04:49,852 --> 00:04:53,186
这里，UI图像视图非常简单的小子类。

109
00:04:53,255 --> 00:04:56,757
它只是选择一个这样的小行星图像，对吧？

110
00:04:56,825 --> 00:04:59,992
看到这些小行星的图像一，二通过小行星九，

111
00:05:00,061 --> 00:05:01,961
这件事只是挑选其中之一

112
00:05:02,030 --> 00:05:03,562
从中创建一个图像视图。

113
00:05:03,631 --> 00:05:07,199
好的，这就是AsteriodView，所以看起来很简单

114
00:05:07,268 --> 00:05:10,035
当我们把它移动到支持文件中。

115
00:05:10,103 --> 00:05:14,506
这是一个小小的exte，我做的扩展文件

116
00:05:14,574 --> 00:05:18,943
CGFloat，CGSize和CGRect，以及CGPoint。

117
00:05:19,012 --> 00:05:21,812
这些只是一些方便的功能，就像

118
00:05:21,880 --> 00:05:24,781
这里是CGSize的区域，只是与时间高度。

119
00:05:24,850 --> 00:05:28,351
或者这里是一个CG浮点数，它会生成一个随机数

120
00:05:28,420 --> 00:05:31,554
一定范围的浮标是一种很酷。

121
00:05:31,623 --> 00:05:33,923
随机浮动，好的，并返回。

122
00:05:33,992 --> 00:05:35,424
这是CGRect。

123
00:05:35,493 --> 00:05:37,726
我有一个生成随机点的随机点

124
00:05:37,795 --> 00:05:39,060
在任何地方的矩形内。

125
00:05:39,129 --> 00:05:41,729
Cuz显然我是

126
00:05:41,798 --> 00:05:43,998
这很高兴有一点，var在这里，

127
00:05:44,067 --> 00:05:45,666
随机点，直肠。

128
00:05:45,735 --> 00:05:47,935
所以，你可以稍后再来看看，

129
00:05:48,004 --> 00:05:50,837
在编写代码时，我会尝试参考

130
00:05:50,905 --> 00:05:53,706
这些是我做的小CGRect扩展之一。

131
00:05:53,775 --> 00:05:57,076
我这样做，但我认为我的代码阅读更好，当我，

132
00:05:57,145 --> 00:05:58,895
有点冷静这个数学到这些漂亮的小小的扩展。

133
00:05:58,896 --> 00:06:00,646
你懂的。

134
00:06:00,715 --> 00:06:03,548
但是，所有这些都是完美的扩展

135
00:06:03,616 --> 00:06:04,415
他们每个班。

136
00:06:04,484 --> 00:06:06,017
他们都不是太空船

137
00:06:06,086 --> 00:06:08,753
小行星特定的核心图形扩展。

138
00:06:10,222 --> 00:06:13,289
所以，移动到支持文件。

139
00:06:13,358 --> 00:06:15,558
接下来我们有宇宙飞船视图。

140
00:06:15,627 --> 00:06:16,392
好的，宇宙飞船的视图

141
00:06:16,461 --> 00:06:18,894
只是画出我给你看的小太空飞船。

142
00:06:18,963 --> 00:06:21,663
它知道如何用小火焰画它

143
00:06:21,732 --> 00:06:23,665
如果发动机正在射击，出来后面。

144
00:06:23,734 --> 00:06:25,500
这是这里的整个公共API，

145
00:06:25,569 --> 00:06:27,134
这是我们将要使用的唯一API。

146
00:06:27,203 --> 00:06:29,937
所以，这只是一个恶霸，打开那个小火

147
00:06:30,006 --> 00:06:32,039
出来的还是不是所有的。

148
00:06:32,107 --> 00:06:34,841
方向是船指向的方向

149
00:06:34,910 --> 00:06:37,811
这是你知道零到两个pi，所以它是弧度。

150
00:06:37,879 --> 00:06:41,514
你知道，我们希望现在可以了解到零二位

151
00:06:41,582 --> 00:06:45,884
那个零点向右的圈子，我们四处走去。

152
00:06:45,953 --> 00:06:48,921
盾牌级别，所以这艘船上有一点圆盾

153
00:06:48,990 --> 00:06:51,155
它和盾牌级别从零到一百。

154
00:06:51,224 --> 00:06:52,490
当一百，这是一个完整的盾牌

155
00:06:52,559 --> 00:06:53,591
它甚至不显示盾牌。

156
00:06:53,660 --> 00:06:55,693
但是一旦盾牌被破坏，

157
00:06:55,761 --> 00:06:58,161
它有点显示屏蔽部分损坏，

158
00:06:58,230 --> 00:07:03,033
直到你达到盾级0，船爆炸了，好吗？

159
00:07:03,101 --> 00:07:05,835
这个盾牌是活跃的，它纯粹是一个绘画的东西。

160
00:07:05,904 --> 00:07:08,571
当盾牌活跃时，它会发光一点。

161
00:07:08,639 --> 00:07:10,406
所以，我们要有我们的船，

162
00:07:10,474 --> 00:07:13,242
只是为了使我们的UI简单，它将自动

163
00:07:13,310 --> 00:07:15,811
当小行星撞击它时，将其变成盾牌。

164
00:07:15,879 --> 00:07:18,346
好吧，所以我们是一个汽车防护罩部署，所以

165
00:07:18,415 --> 00:07:20,314
我们会打开它，所以我们可以看到它，

166
00:07:20,383 --> 00:07:22,549
小行星导致盾牌打开。

167
00:07:22,618 --> 00:07:26,486
然后终于有这个小屏蔽边界的家伙，

168
00:07:26,555 --> 00:07:29,623
这只是给我们一个描述的UIBezierPath

169
00:07:29,692 --> 00:07:30,490
护盾。

170
00:07:30,559 --> 00:07:32,625
因为它会是一个简单的弧

171
00:07:32,694 --> 00:07:34,560
这是一个圈子，只是给我们回来。

172
00:07:34,628 --> 00:07:37,329
请注意，它可以在任何视图坐标中给我们

173
00:07:37,397 --> 00:07:40,366
太空了，那是因为我们会做的

174
00:07:40,434 --> 00:07:41,032
动画。

175
00:07:41,101 --> 00:07:42,900
我们要指定一个参考视图

176
00:07:42,969 --> 00:07:44,068
我们所有的动画，和

177
00:07:44,137 --> 00:07:46,036
当我们有这样的东西像边界。

178
00:07:46,104 --> 00:07:48,371
我们必须始终在该参考视图中指定它们

179
00:07:48,440 --> 00:07:49,272
坐标系。

180
00:07:49,340 --> 00:07:52,542
所以，如果我们要得到船盾的边界

181
00:07:52,611 --> 00:07:54,177
作为UIBezierPath，

182
00:07:54,245 --> 00:07:56,578
它必须在正确的坐标系中。

183
00:07:56,647 --> 00:07:59,414
所以这就是为什么在这个视图上有这个视图，但是

184
00:07:59,482 --> 00:08:02,650
它刚刚返回到UIBezierPath好吧，所以

185
00:08:02,719 --> 00:08:05,786
宇宙飞船视图我可以做任何其他事情。

186
00:08:05,855 --> 00:08:09,056
然后这里是最后一个小行星字段查看这个

187
00:08:09,125 --> 00:08:10,958
是这里的整个事情。

188
00:08:11,027 --> 00:08:14,427
它只有一个方法，它是添加一些小行星。

189
00:08:14,496 --> 00:08:16,996
好的，这里的所有代码正在做的只是放置

190
00:08:17,065 --> 00:08:19,699
一个随机大小的小行星

191
00:08:19,767 --> 00:08:21,634
一个随机点在它的边界内。

192
00:08:21,702 --> 00:08:25,037
好的，真的很超级简单就在这里。

193
00:08:25,105 --> 00:08:27,539
它有这个小东西的禁区在哪里

194
00:08:27,608 --> 00:08:28,973
不会把小行星放在那里，而且

195
00:08:29,042 --> 00:08:30,275
你会明白我们为什么要这样做。

196
00:08:30,344 --> 00:08:31,475
我们不想把小行星放在上面

197
00:08:31,544 --> 00:08:33,310
我们的船当我们开始。

198
00:08:33,379 --> 00:08:35,778
现在这个我不会放在支持文件，我们

199
00:08:35,847 --> 00:08:38,315
实际上会添加少量的代码到本指南。

200
00:08:38,384 --> 00:08:40,683
因为我们想要我们的小行星行为，

201
00:08:40,752 --> 00:08:44,186
我们的小行星如何使用动态动画来应用

202
00:08:44,254 --> 00:08:45,487
我们所有的小行星。

203
00:08:45,556 --> 00:08:47,923
所以我们最终会在这里添加一个var

204
00:08:47,991 --> 00:08:50,625
我们可以在这个小行星中设置小行星行为

205
00:08:50,694 --> 00:08:53,861
您可能会想到的实地视图。

206
00:08:53,930 --> 00:08:56,797
好的，所以我要重命名我的通用视图控制器

207
00:08:56,866 --> 00:08:59,066
这里是小行星的视图控制器，

208
00:09:00,302 --> 00:09:02,835
只是很好的回顾我们如何做到这一点。

209
00:09:02,904 --> 00:09:04,504
我们必须再做一件有趣的事情，

210
00:09:04,572 --> 00:09:05,571
我更名为评论。

211
00:09:05,639 --> 00:09:09,975
该类的实际名称，我将重命名该文件，

212
00:09:10,044 --> 00:09:13,479
今天要打字小行星了。

213
00:09:13,547 --> 00:09:17,081
当然，我会去故事板

214
00:09:17,150 --> 00:09:18,550
选择这个东西

215
00:09:18,618 --> 00:09:21,018
并确保它的身份在这里不是

216
00:09:21,086 --> 00:09:24,788
通用视图控制器，它是小行星视图控制器。

217
00:09:24,857 --> 00:09:28,024
好的，大家还记得如何改变美好的事情

218
00:09:28,093 --> 00:09:29,876
然后现在不需要任何这个代码。

219
00:09:29,877 --> 00:09:31,660
容易做

220
00:09:31,729 --> 00:09:34,630
而且当你想象当你做一个游戏你也是显然的

221
00:09:34,699 --> 00:09:36,098
有很多常数。

222
00:09:36,167 --> 00:09:38,266
好的，船舶加速度的常数

223
00:09:38,335 --> 00:09:39,767
事情的大小，无论如何。

224
00:09:39,836 --> 00:09:41,135
所以我有一堆常数，

225
00:09:41,204 --> 00:09:43,571
我要在这里输入。

226
00:09:45,074 --> 00:09:48,141
我会使用这些常数，我会使用它们。

227
00:09:48,209 --> 00:09:49,909
但是像我说的那样，burnAcceleration，

228
00:09:49,978 --> 00:09:52,078
initialAsteroidCount，这些东西都这样

229
00:09:52,147 --> 00:09:55,381
很明显这些常数是多少。

230
00:09:56,750 --> 00:09:59,617
好的，所以现在我们都设置来写我们的应用程序

231
00:09:59,686 --> 00:10:04,422
关注我们需要做的UI动画动画。

232
00:10:04,491 --> 00:10:09,126
我要做的第一件事是放小行星视野

233
00:10:09,195 --> 00:10:10,761
在我的self.view。

234
00:10:10,830 --> 00:10:13,163
好的，所以基本上放在屏幕上，我要做

235
00:10:13,232 --> 00:10:15,399
在代码中，而不是在故事板中进行。

236
00:10:15,468 --> 00:10:17,967
但是我会很直截了当

237
00:10:18,036 --> 00:10:20,603
一个私有的变种将成为我的小行星领域

238
00:10:20,672 --> 00:10:22,738
它将会是AsteroidFieldView的类型。

239
00:10:22,806 --> 00:10:26,242
好的，这就是这里，我向你展示，

240
00:10:26,310 --> 00:10:28,844
我们知道如何在那里添加小行星。

241
00:10:28,912 --> 00:10:31,746
我会把这个隐含地解包可选

242
00:10:31,815 --> 00:10:34,982
因为一旦我初始化该字段，它总是会被设置的

243
00:10:35,051 --> 00:10:37,017
在这个MVC的整个生命周期。

244
00:10:37,086 --> 00:10:40,487
所以可以让它隐含地包装好了。

245
00:10:40,556 --> 00:10:43,123
我只需要一点点小心就好

246
00:10:43,192 --> 00:10:44,924
一个outlet，不能访问这个。

247
00:10:44,993 --> 00:10:48,728
或至少在初始化之前检查它是否为零。

248
00:10:48,796 --> 00:10:50,596
我什么时候初始化它？

249
00:10:50,664 --> 00:10:53,566
我实际上会在viewDidAppear中初始化它。

250
00:10:53,634 --> 00:10:57,936
好的，所以在viewDidAppear我要初始化这个和

251
00:10:58,005 --> 00:10:59,737
为什么我在那里做

252
00:10:59,806 --> 00:11:03,240
那么，我真的不需要在之前做，对吧？

253
00:11:03,309 --> 00:11:06,110
直到我的意见出现，我不需要初始化它

254
00:11:06,178 --> 00:11:07,878
小行星字段和所有的东西。

255
00:11:07,947 --> 00:11:09,980
在viewDidAppear中也很好，

256
00:11:10,049 --> 00:11:11,915
你的所有界限都设定好了吧？

257
00:11:11,984 --> 00:11:14,683
你的几何都是设置的，所以你可以指望。

258
00:11:14,752 --> 00:11:17,353
但我不会依赖这个，因为我也会有我的

259
00:11:17,422 --> 00:11:19,220
当我旋转时，小行星领域的事情工作。

260
00:11:19,289 --> 00:11:22,457
所以我也要调整我的小行星领域

261
00:11:22,525 --> 00:11:24,959
我的viewDid布局子视图吧？

262
00:11:25,028 --> 00:11:27,128
Cuz告诉我，我的平衡已经改变了。

263
00:11:27,196 --> 00:11:28,695
所以我会做这两个。

264
00:11:28,764 --> 00:11:30,630
所以我会在viewDidAppear里做这些，我会去的

265
00:11:30,699 --> 00:11:32,866
调用一个叫initializeIfNeeded的东西，

266
00:11:32,935 --> 00:11:35,201
可能没有必要。

267
00:11:35,270 --> 00:11:38,771
记住，viewDidAppear被调用多次cuz

268
00:11:38,840 --> 00:11:40,840
它可能会出现，然后走开，然后回来走开。

269
00:11:40,909 --> 00:11:42,441
所以我会第一次初始化。

270
00:11:42,510 --> 00:11:45,844
所以我要初始化IfNeeded等等

271
00:11:45,912 --> 00:11:48,613
我有这个私人的方法。

272
00:11:48,682 --> 00:11:50,982
需要时初始化

273
00:11:51,051 --> 00:11:56,320
如果如果需要的部分就是如果asteroidField为零，

274
00:11:56,388 --> 00:12:01,658
那么我需要初始化asteroidField。

275
00:12:01,727 --> 00:12:05,528
好的，所以每个人都很酷，我们现在站在哪里？

276
00:12:05,597 --> 00:12:08,197
那么我们需要做什么来创建这个小行星字段呢

277
00:12:08,266 --> 00:12:10,199
只是一个UIView，所以我要创建它和

278
00:12:10,268 --> 00:12:11,367
我会说AsteroidField。

279
00:12:11,436 --> 00:12:13,402
所以在这里做一些更多的空间

280
00:12:13,471 --> 00:12:15,771
只要稍微宽一点。

281
00:12:15,839 --> 00:12:22,177
这是AsteroidFieldView，AsteroidFieldView，好吗？

282
00:12:22,246 --> 00:12:23,278
视图。

283
00:12:23,346 --> 00:12:25,646
大写A.

284
00:12:25,715 --> 00:12:27,214
好吧。 [LAUGH]还有一个看法？

285
00:12:27,283 --> 00:12:28,282
我们如何创建视图？

286
00:12:28,351 --> 00:12:30,517
嗯，我们要使用一个正常的框架

287
00:12:30,586 --> 00:12:31,851
那里有初始化器

288
00:12:31,920 --> 00:12:36,121
我的领域的矩形是什么，我的看法在这里？

289
00:12:36,190 --> 00:12:37,690
我实际上要开始有我的

290
00:12:37,758 --> 00:12:39,224
整个小行星场。

291
00:12:39,293 --> 00:12:42,393
适合我的意见平衡，所以你可以看到整个事情。

292
00:12:42,462 --> 00:12:44,295
但是当我真的去参加比赛的时候，

293
00:12:44,364 --> 00:12:46,397
我会让Azure感觉很大。

294
00:12:46,466 --> 00:12:49,933
所以我的船有很多的空间飞行。

295
00:12:50,002 --> 00:12:52,302
然后我会用一点点技巧，

296
00:12:52,371 --> 00:12:55,438
游戏设计伎俩让它看起来无限。

297
00:12:55,507 --> 00:12:59,242
但是，当然，我无法构建无限大的视图。

298
00:12:59,310 --> 00:13:03,312
所以，我要用一个直觉来构建它

299
00:13:03,380 --> 00:13:07,649
以我的self.view为中心。

300
00:13:07,718 --> 00:13:11,119
所以中间是我在CGRectit扩展中添加的东西。

301
00:13:11,188 --> 00:13:13,221
它只是给你中间点。

302
00:13:13,289 --> 00:13:16,724
我的大小将是我的view.bounds.size。

303
00:13:16,792 --> 00:13:19,993
好吧，现在我要在中心开始，

304
00:13:20,062 --> 00:13:21,929
再次覆盖我的整个视野

305
00:13:21,997 --> 00:13:24,097
你可以看到那里发生了什么。

306
00:13:24,166 --> 00:13:26,333
还有一个括号。

307
00:13:27,436 --> 00:13:28,567
我们还需要做什么？

308
00:13:28,636 --> 00:13:30,770
我们需要将其添加为子视图。

309
00:13:30,838 --> 00:13:32,671
好的，所以我只是去添加这个小行星字段，

310
00:13:32,739 --> 00:13:35,072
我的self.view的这个子视图。

311
00:13:35,141 --> 00:13:36,741
我会控制这里和

312
00:13:36,810 --> 00:13:40,244
然后让我们添加一些小行星，asteroidfield.addasteroids。

313
00:13:40,313 --> 00:13:43,981
我们将增加20个小行星，这是一个很好的小行星。

314
00:13:44,050 --> 00:13:47,984
我认为甚至可能有一个常识

315
00:13:48,053 --> 00:13:52,455
这个，constant.initialAsteroidCount。

316
00:13:52,524 --> 00:13:53,022
初始的是，初始的小行星帐户

317
00:13:53,091 --> 00:13:53,723
那更好，在那里添加一个常数。

318
00:13:57,628 --> 00:14:00,762
我说的另一件事是当我的界限改变的时候，

319
00:14:00,831 --> 00:14:02,697
我想确保我移动我的小行星场

320
00:14:02,766 --> 00:14:04,999
总是到我的新界限的中心。

321
00:14:05,068 --> 00:14:07,535
现在，因为我是我的，现在有点有趣

322
00:14:07,603 --> 00:14:09,903
领域将要开始，在这里你知道，

323
00:14:09,972 --> 00:14:12,405
我开始的界限大小。

324
00:14:12,474 --> 00:14:13,373
而且我不会改变它，但是

325
00:14:13,442 --> 00:14:16,409
当我使我的界限真的很大，我会变得如此之大。

326
00:14:16,478 --> 00:14:18,878
无论我旋转我的设备

327
00:14:18,947 --> 00:14:20,479
它总是会显示部分的领域，所以

328
00:14:20,547 --> 00:14:22,247
我不用担心太多了。

329
00:14:22,315 --> 00:14:26,217
我现在所做的只是在viewdDidLayoutSubviews中，

330
00:14:26,286 --> 00:14:31,089
我会确保总是重申自己的说法

331
00:14:31,158 --> 00:14:35,092
我的小行星是中心。

332
00:14:35,161 --> 00:14:37,461
对等于我的界限。

333
00:14:37,530 --> 00:14:40,197
所以总是把它放回中间。

334
00:14:41,533 --> 00:14:44,467
好的，大家好，我到目前为止做了什么？

335
00:14:44,536 --> 00:14:45,935
我所做的就是创建这个小行星视图。

336
00:14:46,003 --> 00:14:48,170
让我们来看看我们的小行星场是什么样的。

337
00:14:48,239 --> 00:14:53,207
它只是一堆随机大小和

338
00:14:53,276 --> 00:14:56,478
定位的小行星，弹出在那里。

339
00:15:04,620 --> 00:15:07,087
好的，这里是。

340
00:15:07,156 --> 00:15:09,256
好的，这是我的iPhone 7 plus。

341
00:15:09,325 --> 00:15:10,190
好大的

342
00:15:10,259 --> 00:15:12,759
你可以看到我有这些随机大小和

343
00:15:12,828 --> 00:15:14,460
形状，你知道，不同的。

344
00:15:14,529 --> 00:15:16,862
这九个不同的小行星在这里。

345
00:15:16,931 --> 00:15:19,731
现在是时候学习动态动画了。

346
00:15:19,800 --> 00:15:21,567
我们要让这些事情动起来。

347
00:15:21,635 --> 00:15:23,935
现在，我们如何让这些小行星开始浮动

348
00:15:24,003 --> 00:15:24,803
在空间里？

349
00:15:24,871 --> 00:15:28,005
答案是我们要推他们。

350
00:15:28,074 --> 00:15:30,040
我们要使用推送行为

351
00:15:30,109 --> 00:15:33,343
给它一个瞬间的推动这个东西只是飞走。

352
00:15:33,412 --> 00:15:36,345
所以我们随机地把它们全部推到随机的方向。

353
00:15:36,414 --> 00:15:39,114
所以他们都开始移动它所有不同的方向。

354
00:15:39,183 --> 00:15:43,119
现在做这个动画，我们总是需要这个顶级的

355
00:15:43,187 --> 00:15:45,821
是一个动画师的事情，好的。

356
00:15:45,890 --> 00:15:48,890
动画制作者控制所有的动画。

357
00:15:48,959 --> 00:15:52,193
所以你说这个动画，你总是会有的

358
00:15:52,262 --> 00:15:55,896
一个私有的var，你通常被称为动画师。

359
00:15:55,965 --> 00:16:00,234
哪个将是一个UI动态动画师。

360
00:16:00,302 --> 00:16:02,203
动画。

361
00:16:02,271 --> 00:16:08,441
并且它的初始化器参考视图。

362
00:16:08,510 --> 00:16:10,843
而这个参考视图只是定义坐标

363
00:16:10,912 --> 00:16:13,579
系统的所有边界的碰撞和

364
00:16:13,648 --> 00:16:15,181
像这样的东西会发生的。

365
00:16:15,250 --> 00:16:17,583
现在我想要这个参考视图是我的

366
00:16:17,651 --> 00:16:18,716
小行星场。

367
00:16:18,785 --> 00:16:20,051
这是最有意义的，对。

368
00:16:20,119 --> 00:16:21,786
一切都是小行星，这是一个很好的视图。

369
00:16:21,854 --> 00:16:24,121
我可以选择真正任何高的视图

370
00:16:24,190 --> 00:16:26,423
在我想要动画的层次结构中。

371
00:16:26,492 --> 00:16:29,158
现在，我们在这里遇到了同样的确切问题

372
00:16:29,227 --> 00:16:31,794
最后一个演示我试图初始化一个var和

373
00:16:31,863 --> 00:16:34,663
在初始化的一部分，我试图使用一个var和

374
00:16:34,732 --> 00:16:35,932
我们知道我们不能这样做。

375
00:16:36,000 --> 00:16:37,866
我们不能使用我们自己的任何vars或

376
00:16:37,935 --> 00:16:40,702
功能，直到我们完全初始化我们自己。

377
00:16:40,771 --> 00:16:43,138
所以，我们会做lazy。

378
00:16:43,207 --> 00:16:44,772
我们知道，当我们这样做lazy的做法，

379
00:16:44,841 --> 00:16:46,974
我们必须明确地键入。

380
00:16:47,043 --> 00:16:50,010
我们不能使用静态static type。

381
00:16:50,078 --> 00:16:51,878
在这里，动画师。

382
00:16:51,947 --> 00:16:54,414
而且我们也知道，如果我们只是说小行星领域，

383
00:16:54,483 --> 00:16:55,848
它将要寻找一个静态的。

384
00:16:55,917 --> 00:16:57,416
一个类。

385
00:16:57,485 --> 00:16:58,617
方法称为小行星字段。

386
00:16:58,686 --> 00:17:00,552
所以告诉我们想要一个实例，

387
00:17:00,621 --> 00:17:02,454
我们会说self.asteroid。

388
00:17:02,522 --> 00:17:05,255
而且这将要工作，因为它会是lazy的，所以

389
00:17:05,324 --> 00:17:08,325
这不是真正地执行这个初始化，直到

390
00:17:08,394 --> 00:17:11,061
有人要求，没有人被允许要求

391
00:17:11,130 --> 00:17:13,063
直到我们完全初始化为止;和

392
00:17:13,132 --> 00:17:15,565
因此我们已经摆脱了这个难题。

393
00:17:16,935 --> 00:17:18,567
好的，大家都很酷吗？

394
00:17:18,636 --> 00:17:20,236
所以现在我们有一个动画师。

395
00:17:20,304 --> 00:17:21,937
动画的下一步是什么？

396
00:17:22,005 --> 00:17:22,804
行为。

397
00:17:22,873 --> 00:17:23,838
我们必须创造行为。

398
00:17:23,907 --> 00:17:25,139
所以我们的

399
00:17:25,208 --> 00:17:27,307
小行星对他们有很多的行为。

400
00:17:27,376 --> 00:17:29,008
好的？他们会相撞

401
00:17:29,077 --> 00:17:31,311
有事情，他们会被推动，

402
00:17:31,379 --> 00:17:34,380
他们会有一般的物理学，他们甚至，

403
00:17:34,449 --> 00:17:37,416
当船正在加速通过太空时，他们会去

404
00:17:37,485 --> 00:17:40,252
即使正在经历相反的方向加速。

405
00:17:40,320 --> 00:17:43,622
所以我们将把所有这些组合成一个，

406
00:17:43,690 --> 00:17:45,323
单一行为。

407
00:17:45,392 --> 00:17:48,359
好的，一个子句行为，那个子句行为是

408
00:17:48,428 --> 00:17:51,629
将会是所有其他行为的综合体。

409
00:17:51,698 --> 00:17:52,429
所以我们现在就这样做。

410
00:17:52,498 --> 00:17:55,599
我们去文件>新建并创建一个新的

411
00:17:55,668 --> 00:17:58,001
这将是一个UI动态行为。

412
00:17:58,070 --> 00:18:00,837
你看到它表示子类：UIDynamicBehavior这里。

413
00:18:00,906 --> 00:18:01,971
我会叫它

414
00:18:02,040 --> 00:18:03,772
AsteriodBehavior因为这是它是什么。

415
00:18:03,841 --> 00:18:04,572
这是行为。

416
00:18:04,641 --> 00:18:06,742
它会收集所有与之相关的行为

417
00:18:06,810 --> 00:18:07,809
小行星。

418
00:18:07,877 --> 00:18:09,043
把它放在我所有的地方。

419
00:18:09,111 --> 00:18:12,746
所以这里是我的动态行为。

420
00:18:12,815 --> 00:18:16,249
所有我要做的开始是添加一个小行星和

421
00:18:16,318 --> 00:18:18,919
一个删除小行星方法，所以我可以收集

422
00:18:18,987 --> 00:18:22,655
小行星，那么我导致某种行为。

423
00:18:22,723 --> 00:18:26,058
所以让我们有一个私有的var，我们称之为小行星。

424
00:18:26,126 --> 00:18:27,893
它只是一个数组

425
00:18:27,961 --> 00:18:29,361
小行星的意见，好的。

426
00:18:29,429 --> 00:18:32,163
然后，我们将有一个私人的或者一个公共方法

427
00:18:32,232 --> 00:18:36,267
称为AddAsteroid，你会给它一个小行星和

428
00:18:36,335 --> 00:18:39,737
它只是要添加这个小行星，好的。

429
00:18:39,806 --> 00:18:44,541
把这个小行星固定在我们的字典上，

430
00:18:44,610 --> 00:18:46,410
我们这里的小行星数组。

431
00:18:46,479 --> 00:18:50,280
然后我们也会有removeAsteroid。

432
00:18:50,348 --> 00:18:55,085
这一个必须首先确保我们实际有

433
00:18:55,153 --> 00:18:58,754
这个小行星说是否可以让索引

434
00:18:58,823 --> 00:19:02,924
这个小行星的小行星指数好吗？

435
00:19:02,993 --> 00:19:05,861
如果我们可以在那里找到它，那么我们是

436
00:19:05,930 --> 00:19:10,365
只要在那个索引上删除小行星。

437
00:19:10,433 --> 00:19:12,500
好的，所以这是迄今为止我们的行为。

438
00:19:12,568 --> 00:19:16,103
实际上并没有做任何行为，但现在我们可以添加

439
00:19:16,172 --> 00:19:18,104
小行星或从行为中删除小行星。

440
00:19:18,173 --> 00:19:19,940
哪个是动画的关键部分，

441
00:19:20,009 --> 00:19:21,341
记住总有三个步骤。

442
00:19:21,409 --> 00:19:24,010
得到动画师，你将动作添加到动画师，

443
00:19:24,079 --> 00:19:27,179
那么你添加的项目，小行星在这种情况下，

444
00:19:27,248 --> 00:19:28,580
对行为。

445
00:19:28,649 --> 00:19:32,083
所以这就是我们已经走了这三个步骤。

446
00:19:32,152 --> 00:19:34,819
现在我们还没有选择任何行为来复合，

447
00:19:34,888 --> 00:19:36,954
建立我们的事情。

448
00:19:37,023 --> 00:19:39,857
但至少我们有基础设施来做到这一点。

449
00:19:39,926 --> 00:19:42,693
现在，现在我们在这里有一个行为，

450
00:19:42,762 --> 00:19:45,061
让我们回到我们的视图控制器

451
00:19:45,130 --> 00:19:48,164
创建这些行为之一，实例化一个，好吗？

452
00:19:48,233 --> 00:19:50,333
并将其添加到我们的动画师。

453
00:19:50,402 --> 00:19:52,768
所以我们可以通过只说私有变量来实例化一个

454
00:19:52,837 --> 00:19:58,073
asteroidBehavior = asteroidBehavior。

455
00:19:58,142 --> 00:20:00,676
行为，好吧，所以

456
00:20:00,745 --> 00:20:02,777
我们刚刚创建了一个小行星行为。

457
00:20:02,846 --> 00:20:04,912
但是它不会做任何事情，那个行为，

458
00:20:04,981 --> 00:20:07,481
无论我们告诉它教导最终做什么，它不会

459
00:20:07,549 --> 00:20:10,216
任何东西到小行星，直到我们添加到一个动画师。

460
00:20:10,285 --> 00:20:15,255
现在什么时候向动画师添加一个行为？

461
00:20:15,323 --> 00:20:18,391
那么你真的只想要动画继续下去

462
00:20:18,459 --> 00:20:19,993
当你在屏幕上

463
00:20:20,061 --> 00:20:23,195
好吧，如果你不在屏幕上，可能会动画化，

464
00:20:23,264 --> 00:20:25,897
99％的时间没有任何意义。

465
00:20:25,966 --> 00:20:29,334
所以，这样一个很酷的地方，在viewDidAppear中。

466
00:20:29,403 --> 00:20:33,638
所以当我的观点出现时，我要告诉我的动画师，

467
00:20:33,707 --> 00:20:37,409
添加行为，我的小行星行为。

468
00:20:39,512 --> 00:20:41,845
好的，现在，我什么时候要删除它？

469
00:20:41,914 --> 00:20:43,814
嗯，当我消失的时候我想删除它。

470
00:20:43,883 --> 00:20:47,216
所以在视图中会消失。

471
00:20:47,285 --> 00:20:48,250
不，甚至没有接近。

472
00:20:48,319 --> 00:20:50,585
视图将消失。

473
00:20:50,654 --> 00:20:54,056
super.view会消失。

474
00:20:54,125 --> 00:20:59,494
[SOUND] Animated.

475
00:20:59,563 --> 00:21:01,763
在这里我要对我的动画师说，

476
00:21:01,831 --> 00:21:03,431
删除此行为。

477
00:21:03,499 --> 00:21:06,400
一旦我从动画师移动一个行为，

478
00:21:06,469 --> 00:21:08,568
它会停止动画的行为，好吗？

479
00:21:08,637 --> 00:21:11,571
换句话说，行为将不再适用

480
00:21:11,640 --> 00:21:13,306
到正在进行的动画。

481
00:21:13,375 --> 00:21:15,208
现在我可以把它放回来，它会再次开始动画。

482
00:21:15,276 --> 00:21:17,409
有一件很有意思的是，

483
00:21:17,478 --> 00:21:19,311
所有正在动画的项目，

484
00:21:19,379 --> 00:21:21,212
如果你从动画师那里拿出一个动画师，

485
00:21:21,281 --> 00:21:24,182
他们会失去所有的线速度，他们会停止移动。

486
00:21:24,250 --> 00:21:26,017
所以如果你把它添加回来，他们都会被卡住。

487
00:21:26,086 --> 00:21:28,886
你必须压制或重新建立

488
00:21:28,955 --> 00:21:31,155
他们的线性速度或类似的东西。

489
00:21:31,224 --> 00:21:33,456
好的，这是关于停止的唯一不好的部分。

490
00:21:33,525 --> 00:21:36,125
你真的不能真的暂停动画，

491
00:21:36,194 --> 00:21:37,126
它停止了

492
00:21:37,195 --> 00:21:39,628
所有的力量都停止在动画的东西上。

493
00:21:39,697 --> 00:21:40,962
然后当你加回来，

494
00:21:41,031 --> 00:21:42,363
他们都开始重新播放。

495
00:21:42,432 --> 00:21:44,332
但是如果船在加速的时候

496
00:21:44,400 --> 00:21:45,399
你回来，船不断加速。

497
00:21:45,400 --> 00:21:46,399
你删除它

498
00:21:46,469 --> 00:21:48,936
那会这些事情还在加速。

499
00:21:49,004 --> 00:21:51,171
所以会有效。

500
00:21:51,240 --> 00:21:53,773
所以现在我们已经添加了小行星的行为了

501
00:21:53,842 --> 00:21:54,374
动画师。

502
00:21:54,442 --> 00:21:55,274
下一步是什么？

503
00:21:55,343 --> 00:21:58,143
我们必须添加小行星的行为。

504
00:21:58,212 --> 00:21:59,511
好的，如果你不添加小行星的行为，

505
00:21:59,580 --> 00:22:00,211
没有什么会发生的。

506
00:22:00,280 --> 00:22:03,181
而我实际上会有我的小行星视野，

507
00:22:03,250 --> 00:22:06,283
这是创造小行星的事情。

508
00:22:06,352 --> 00:22:07,718
所以它有点适用

509
00:22:07,787 --> 00:22:10,887
我的应用程序的架构，如果我只有它要处理

510
00:22:10,956 --> 00:22:13,757
与小行星，我实际上不必处理任何

511
00:22:13,826 --> 00:22:15,758
的小行星在我的视图控制器，

512
00:22:15,827 --> 00:22:16,959
这太酷了

513
00:22:17,028 --> 00:22:20,228
所以我会回到我的小行星

514
00:22:20,297 --> 00:22:24,533
现场视图在这里，我将在这里添加一个公共变量。

515
00:22:24,601 --> 00:22:27,936
哪个是我要应用的小行星行动

516
00:22:28,005 --> 00:22:31,406
到我所有的小行星。

517
00:22:31,474 --> 00:22:35,042
所以我们当然会有一个小行星的行为。

518
00:22:35,111 --> 00:22:36,276
我们会选择它，

519
00:22:36,345 --> 00:22:38,779
因为也许我的小行星只是坐在那里，

520
00:22:38,848 --> 00:22:40,981
不行为，没有人，那种行为，

521
00:22:41,049 --> 00:22:43,082
他们没有做任何事情，他们只是坐在那里。

522
00:22:43,150 --> 00:22:44,349
这可能很好

523
00:22:44,418 --> 00:22:46,385
有人设置好了，好吗？

524
00:22:46,454 --> 00:22:50,421
有人设置我的行为，我想删除

525
00:22:50,490 --> 00:22:53,725
我所有的小行星从我以前的任何行为和

526
00:22:53,794 --> 00:22:55,493
添加到新的行为，好吗？

527
00:22:55,562 --> 00:22:58,362
我不想设置这个小行星的行为，

528
00:22:58,431 --> 00:23:01,231
我不想要任何旧的行为仍然是行为。

529
00:23:01,300 --> 00:23:03,801
所以，我实际上会经过我所有的小行星

530
00:23:03,869 --> 00:23:09,472
这里是小行星，小行星，小行星，小行星。

531
00:23:09,540 --> 00:23:13,943
而对于每一个人来说，如果我的老值不是nil，

532
00:23:14,012 --> 00:23:18,181
一个旧的行为，然后我要删除这个小行星。

533
00:23:21,518 --> 00:23:23,384
同样，对于新值，

534
00:23:23,453 --> 00:23:25,654
我有新的小行星行为。

535
00:23:25,722 --> 00:23:29,057
如果这不是nil，那么我会加小行星。

536
00:23:31,394 --> 00:23:34,095
好的，现在这个小小的var在这里呢

537
00:23:34,163 --> 00:23:34,995
小行星？

538
00:23:35,064 --> 00:23:36,129
我的小行星在哪里？

539
00:23:36,198 --> 00:23:38,030
我的小行星没有这个var。

540
00:23:38,099 --> 00:23:39,665
我其实在等待着

541
00:23:39,734 --> 00:23:41,566
这不是提前提出我想要显示

542
00:23:41,635 --> 00:23:43,801
你有一种很酷的方法来做到这一点。

543
00:23:43,870 --> 00:23:46,371
我会有一个私人的小行星。

544
00:23:46,439 --> 00:23:50,307
它将是一个小行星视图的数组，和

545
00:23:50,376 --> 00:23:51,375
它会被计算出来。

546
00:23:51,444 --> 00:23:53,109
而我要计算的方式是，

547
00:23:53,178 --> 00:23:56,579
我会返回我的所有子视图，好的，

548
00:23:56,648 --> 00:23:59,315
所有我的子视图都是这些小行星，但是

549
00:23:59,384 --> 00:24:02,618
也许有一天我会添加一些其他的子视图

550
00:24:02,687 --> 00:24:05,420
一个小行星，我不知道，太空站，还是一些东西。

551
00:24:05,489 --> 00:24:06,588
所以，我只想要

552
00:24:06,657 --> 00:24:08,690
我的小视图是小行星的视图。

553
00:24:08,759 --> 00:24:12,493
所以我会说，subviews.flatMap。

554
00:24:12,562 --> 00:24:15,897
好的，现在flatMap需要闭包，如果闭包

555
00:24:15,966 --> 00:24:19,266
返回nill，它不会添加到东西。

556
00:24:19,335 --> 00:24:22,002
在这里返回值，如果它不返回nil。

557
00:24:22,070 --> 00:24:25,172
它是这样，换句话说，flatmap创建一个新的数组。

558
00:24:25,240 --> 00:24:28,575
所有的东西在第一个数组，但与此

559
00:24:28,643 --> 00:24:31,677
关闭它们执行，并且它跳过了nil。

560
00:24:31,746 --> 00:24:34,780
所以，我只会说$ 0，这是每个

561
00:24:34,849 --> 00:24:38,084
将数组中的子视图作为小行星视图。

562
00:24:39,286 --> 00:24:41,052
好的，这样会返回nill，

563
00:24:41,121 --> 00:24:42,987
如果我有一个不是小行星视图的子视图。

564
00:24:43,055 --> 00:24:46,290
但所有其他的都会这样做，这就是这样做的

565
00:24:46,359 --> 00:24:50,294
返回值变成小行星视图的数组。

566
00:24:51,664 --> 00:24:53,329
好吧，只是想我会给你一张平面图，

567
00:24:53,398 --> 00:24:54,864
有趣的

568
00:24:54,933 --> 00:24:56,833
好吧，所以现在我们有这个小行星的一切。

569
00:24:56,901 --> 00:24:58,600
我们可能想做的另一件事就是当我们

570
00:24:58,669 --> 00:25:00,402
添加一个新的小行星。

571
00:25:00,471 --> 00:25:02,437
如果我们有我们的小行星，

572
00:25:02,506 --> 00:25:04,205
让我们继续添加这个小行星到那里。

573
00:25:04,274 --> 00:25:06,474
所以，在小行星行动中，

574
00:25:06,543 --> 00:25:09,810
我要加小行星，这个小行星。

575
00:25:11,246 --> 00:25:14,280
所以，你可以在前后设置小行星

576
00:25:14,349 --> 00:25:16,549
你添加小行星，它将以这种方式工作。

577
00:25:18,352 --> 00:25:20,752
所以现在，我们需要设置，看到这个var在这里？

578
00:25:20,821 --> 00:25:23,321
我们需要从我们的控制器中确定，以便我们

579
00:25:23,390 --> 00:25:28,059
小行星字段视图在这里知道使用什么行为。

580
00:25:28,128 --> 00:25:29,627
所以，我们在这里说，

581
00:25:29,696 --> 00:25:31,862
那么我们会把它甚至更高一点。

582
00:25:31,931 --> 00:25:33,497
我们会说小行星字段。

583
00:25:33,565 --> 00:25:40,137
将您的小行星行为设置为我们的AsteroidBehavior。

584
00:25:40,205 --> 00:25:42,571
而且，再一次，如果我在这之前做到这一点，或者

585
00:25:42,640 --> 00:25:43,772
我可以在这之后做到。

586
00:25:43,841 --> 00:25:45,508
无论哪种方式，它都会工作。

587
00:25:47,511 --> 00:25:48,310
好的吗

588
00:25:48,379 --> 00:25:50,645
好的，现在我们都完全成立了。

589
00:25:50,714 --> 00:25:52,346
我们有这个行为，习惯行为，

590
00:25:52,415 --> 00:25:53,647
这还没有做任何事情。

591
00:25:53,716 --> 00:25:56,082
所有的小行星都被添加到它，好吧，

592
00:25:56,151 --> 00:25:57,584
它被添加到一个动画师。

593
00:25:57,652 --> 00:26:00,286
我们现在需要做的就是实现我们的行为

594
00:26:00,355 --> 00:26:02,188
但是我们实施行为。

595
00:26:02,256 --> 00:26:04,790
它将开始适用于我们所有的小行星。

596
00:26:04,859 --> 00:26:07,459
所以，我说我们想要的第一件事是推动他们。

597
00:26:07,528 --> 00:26:10,228
所以，我们去添加一个推动行为

598
00:26:10,297 --> 00:26:10,962
小行星行为。

599
00:26:11,030 --> 00:26:13,932
所以，在这里继承我们的小行星行为。

600
00:26:14,000 --> 00:26:17,001
在推动行为，我会做这个推动

601
00:26:17,070 --> 00:26:22,806
行为通过创建一个名为pushAllAsteroids的func，好的。

602
00:26:22,874 --> 00:26:26,176
而且我会有一个争论这个pushAllAsteroids，

603
00:26:26,245 --> 00:26:28,578
这告诉你要我多少推他们。

604
00:26:28,647 --> 00:26:30,880
总是要随机推动它们，但是

605
00:26:30,949 --> 00:26:32,314
你可以说多少。

606
00:26:32,383 --> 00:26:35,384
所以我会把它称之为大小和

607
00:26:35,452 --> 00:26:39,020
我甚至可以指定一定范围的推算。

608
00:26:39,089 --> 00:26:40,822
因为你不想推他们所有的

609
00:26:40,890 --> 00:26:42,523
完全相同的数量。

610
00:26:42,591 --> 00:26:46,427
所以，我们会创造一个这样的范围。

611
00:26:46,496 --> 00:26:50,064
没有一个CGFloat的范围，我们将有一个默认值。

612
00:26:50,133 --> 00:26:53,700
0之间的默认值为0..0.5。

613
00:26:53,769 --> 00:26:56,135
这意味着不要推他们。

614
00:26:56,204 --> 00:27:00,773
这意味着推动他们相当数量但是

615
00:27:00,841 --> 00:27:01,573
不是很难

616
00:27:01,642 --> 00:27:04,143
一点推动是一个很好的推动。

617
00:27:04,212 --> 00:27:05,576
这些是我应该可以拥有的那种

618
00:27:05,645 --> 00:27:07,678
这是一个常数，但这些是你会做的事情

619
00:27:07,747 --> 00:27:10,014
玩这些数字，直到你得到的感觉。

620
00:27:10,083 --> 00:27:11,415
对于你想要的动画

621
00:27:11,484 --> 00:27:13,550
你希望他们在幻灯片中有多快或多么难

622
00:27:13,619 --> 00:27:16,487
你想要的东西被推或什么。

623
00:27:16,555 --> 00:27:19,556
好吧，我该怎么推这个小行星？

624
00:27:19,625 --> 00:27:21,624
我会用推动行为来做。

625
00:27:21,693 --> 00:27:26,061
所以我要经过我的小行星，好吗？

626
00:27:26,130 --> 00:27:28,964
而对于每一个人，我都要创建一个推动者

627
00:27:29,033 --> 00:27:34,402
将会是一个UI UIPushBehavior，和UIPushBehavior的

628
00:27:34,471 --> 00:27:37,272
这里的创作者就是这里，这是项目。

629
00:27:37,341 --> 00:27:39,874
所以推一下就可以推多个物品了。

630
00:27:39,943 --> 00:27:40,774
但我不想在这里，

631
00:27:40,843 --> 00:27:42,943
cuz我想推20个小行星，或者

632
00:27:43,012 --> 00:27:44,611
我所有的小行星，在不同的方向。

633
00:27:44,680 --> 00:27:46,746
所以，我不想把它们全都推向同一个方向。

634
00:27:46,815 --> 00:27:48,281
所以在这里我只是要有数组

635
00:27:48,349 --> 00:27:52,551
有一件事，

636
00:27:52,620 --> 00:27:54,286
而且模式可以是连续的，

637
00:27:54,355 --> 00:27:56,388
这意味着我只是继续推动它永远。

638
00:27:56,457 --> 00:27:58,156
所以这基本上是速度，

639
00:27:58,224 --> 00:28:00,591
推动行为是连续的速度。

640
00:28:00,660 --> 00:28:03,994
或者它可以是瞬时的，这是一个推动。

641
00:28:04,063 --> 00:28:04,961
这就是我想要的。

642
00:28:05,030 --> 00:28:07,131
我只是想让他们开始。

643
00:28:07,199 --> 00:28:09,199
但我不会继续推我的小行星，

644
00:28:09,268 --> 00:28:10,533
我只是要推他们，希望，

645
00:28:10,602 --> 00:28:11,334
他们在外太空，

646
00:28:11,402 --> 00:28:13,668
他们会继续前进，对吧？

647
00:28:13,737 --> 00:28:15,770
我们会看看是否会发生，但希望会发生。

648
00:28:15,839 --> 00:28:19,007
所以，这里的推动者的数量是多么的困难

649
00:28:19,076 --> 00:28:22,310
推动它，所以我要做大幅度的

650
00:28:22,379 --> 00:28:25,780
这是一个随机数，这个范围在这里，

651
00:28:25,849 --> 00:28:29,684
这就是为什么我有这个CGFloat随机在范围。

652
00:28:31,386 --> 00:28:34,220
好的，这就是我们所做的，然后我要选择的角度

653
00:28:34,289 --> 00:28:37,756
也将是随机数CGFloat.random和

654
00:28:37,825 --> 00:28:43,095
这将是一个零到两派的范围，所以他们

655
00:28:43,164 --> 00:28:46,265
可以以任意角度推动半径圆弧。

656
00:28:48,035 --> 00:28:51,703
所以现在，我已经设置了我的推动者，我只需要推动它。

657
00:28:51,772 --> 00:28:52,704
我该怎么做呢？

658
00:28:52,772 --> 00:28:54,171
好吧，让它推我必须

659
00:28:54,240 --> 00:28:56,573
添加到动态动画师，好吗？

660
00:28:56,642 --> 00:28:57,708
一旦我有一个，

661
00:28:57,777 --> 00:29:00,276
任何行为动态动画师，它开始。

662
00:29:00,345 --> 00:29:01,311
所以在这里我只需要添加它。

663
00:29:01,379 --> 00:29:02,445
我该怎么办？

664
00:29:02,513 --> 00:29:06,315
那么这里我创建一个UIDynamicAnimator的子类。

665
00:29:06,384 --> 00:29:08,634
我们添加行为的方式是我们说addChildBehavior。

666
00:29:08,635 --> 00:29:10,885
所以

667
00:29:12,689 --> 00:29:15,556
好的，这个增加了这个推杆，

668
00:29:15,624 --> 00:29:18,459
这一次瞬间推，对我们的行为，

669
00:29:18,527 --> 00:29:19,593
小行星行为。

670
00:29:19,661 --> 00:29:21,528
当然，小行星的行为一直是

671
00:29:21,597 --> 00:29:23,029
添加到动态动画师和

672
00:29:23,097 --> 00:29:25,731
这也导致推动动画。

673
00:29:25,800 --> 00:29:28,801
所以基本上所有的动画得到传播

674
00:29:28,869 --> 00:29:31,303
通过我们的小行星向我们所有的孩子，

675
00:29:31,372 --> 00:29:32,070
我们所有的孩子行为。

676
00:29:32,138 --> 00:29:33,238
我们会有很多。

677
00:29:33,306 --> 00:29:35,873
这里有四五个孩子的行为。

678
00:29:35,942 --> 00:29:39,076
好的，所以让我们继续看看这是否有所作为。

679
00:29:41,313 --> 00:29:43,747
等等，我们首先要做的一件事就是把它叫做。

680
00:29:43,815 --> 00:29:46,182
所以我们从来没有称之为pushAllAsteroids

681
00:29:46,251 --> 00:29:47,550
我们这样做

682
00:29:47,618 --> 00:29:50,118
当我们第一次出现的时候，再次推他们，

683
00:29:50,187 --> 00:29:51,119
我们会给他们一个推。

684
00:29:51,188 --> 00:29:52,654
所以，我们会说推动行为。

685
00:29:52,722 --> 00:29:55,389
和小行星Behavior.pushAllAster-

686
00:29:55,458 --> 00:29:59,260
的OID。和

687
00:29:59,328 --> 00:30:02,196
我们真的不太在乎你会很快看到的。

688
00:30:04,266 --> 00:30:06,733
但是，给我们的小行星有一些很好

689
00:30:06,801 --> 00:30:10,203
太空中的初步动作，你可以看到那里，

690
00:30:10,271 --> 00:30:11,070
我们走了，我们推他们。

691
00:30:11,138 --> 00:30:14,373
现在，发生了一些坏事。

692
00:30:14,441 --> 00:30:16,441
他们被遗忘了。

693
00:30:16,509 --> 00:30:17,575
我们失去了他们。

694
00:30:17,644 --> 00:30:19,277
他们还在继续

695
00:30:19,345 --> 00:30:21,111
我想那里有一个

696
00:30:21,180 --> 00:30:23,613
在那里的一个方法，我们看不到他们在任何地方

697
00:30:23,682 --> 00:30:25,982
我们的看法是我们把他们全部推出了我们的观点。

698
00:30:26,051 --> 00:30:27,917
这是我们需要解决的一个主要问题。

699
00:30:27,986 --> 00:30:29,318
这些东西全都不见了。

700
00:30:29,387 --> 00:30:30,753
所以，我们会解决这个问题。

701
00:30:30,822 --> 00:30:32,454
第二件事，我不知道你是否注意到这里

702
00:30:32,523 --> 00:30:34,656
他们都开始慢慢减速。

703
00:30:34,725 --> 00:30:35,824
好吧，他们开始很快，

704
00:30:35,893 --> 00:30:37,725
那么他们迅速减速。

705
00:30:37,794 --> 00:30:40,194
好的，它的空间自然就会发生。

706
00:30:40,263 --> 00:30:43,530
现在动态动画师的正常物理学

707
00:30:43,599 --> 00:30:46,867
一种像桌面默认，甚至知道推

708
00:30:46,935 --> 00:30:48,801
那里有一些摩擦，对吧。

709
00:30:48,870 --> 00:30:50,536
所以，事情会减慢。

710
00:30:50,605 --> 00:30:53,272
这不是桌面，这是外太空。

711
00:30:53,340 --> 00:30:56,108
所以我们需要解决的两件事情就是保持我们的事情

712
00:30:56,176 --> 00:30:58,744
从飞到处，两个，使它更像外面

713
00:30:58,812 --> 00:31:00,878
空间，没有摩擦，这样的事情，好吗？

714
00:31:00,947 --> 00:31:02,947
我们要做，修理这些东西，哪一个，

715
00:31:03,015 --> 00:31:06,283
与我们的小行星行为不同的子行为。

716
00:31:06,352 --> 00:31:08,953
他们中的第一个飞过了。

717
00:31:09,021 --> 00:31:12,789
现在我要在我的整个地方放一点边界

718
00:31:12,858 --> 00:31:14,724
查看，我的参考视图在这里，所以

719
00:31:14,793 --> 00:31:17,193
小行星击中边界并反弹。

720
00:31:17,262 --> 00:31:18,193
所以他们都在这里。

721
00:31:18,262 --> 00:31:20,829
现在这不会为我的游戏工作，你会看到，

722
00:31:20,898 --> 00:31:22,964
因为当你在空中飞过小行星

723
00:31:23,033 --> 00:31:25,266
不要反弹出一些看不见的墙壁

724
00:31:25,335 --> 00:31:26,067
来到你身边

725
00:31:26,136 --> 00:31:27,768
他们是，新的一直是来。

726
00:31:27,837 --> 00:31:29,336
我会谈谈我们将要怎么做

727
00:31:29,405 --> 00:31:30,303
一分钟的那招。

728
00:31:30,372 --> 00:31:31,837
但首先我只是想让你看看如何

729
00:31:31,906 --> 00:31:32,671
碰撞行为工作。

730
00:31:32,740 --> 00:31:34,306
所以，我会添加边界，

731
00:31:34,375 --> 00:31:38,610
这是围绕这个参考视图的一切，好吗？

732
00:31:38,679 --> 00:31:39,611
那么我们该怎么办呢？

733
00:31:39,680 --> 00:31:41,880
那么，我们回到我们的行为，好吗？

734
00:31:41,948 --> 00:31:44,716
要像我们正在进行的碰撞边界

735
00:31:44,784 --> 00:31:47,351
创建一个私有的VAR将成为一个。

736
00:31:47,420 --> 00:31:48,352
这将是

737
00:31:50,456 --> 00:31:56,993
一个UICollisionBehavior现在任何时候我们添加

738
00:31:57,062 --> 00:32:01,030
一个新的行为，我们需要做这个添加ChildBehavior的东西。

739
00:32:01,098 --> 00:32:04,466
实际上，这是一个好的地方，在init中。

740
00:32:04,535 --> 00:32:07,536
所以我要在这里重写init。

741
00:32:07,605 --> 00:32:08,870
调用我的super init。

742
00:32:08,939 --> 00:32:14,175
然后，我要添加这个ChildBehavior对撞机。

743
00:32:14,244 --> 00:32:16,544
这再一次意味着一旦我加入了一个动画师，

744
00:32:16,613 --> 00:32:18,279
碰撞器被添加到动画师。

745
00:32:18,348 --> 00:32:19,646
它也将动画。

746
00:32:19,715 --> 00:32:23,783
我们需要做的另一件事就是把我们所有的小行星加到

747
00:32:23,852 --> 00:32:25,018
这个行为。

748
00:32:25,087 --> 00:32:26,719
只是因为我们添加了ChildHehavior，

749
00:32:26,788 --> 00:32:28,787
这并不意味着它适用于我们所有的项目。

750
00:32:28,856 --> 00:32:30,155
我们可能不想要

751
00:32:30,224 --> 00:32:32,157
我们可能不想要碰撞效果。

752
00:32:32,225 --> 00:32:34,592
后来我们会发现我们不想要我们的对撞机

753
00:32:34,661 --> 00:32:37,195
实际上适用于小行星。

754
00:32:37,263 --> 00:32:40,965
或者我们不希望我们的碰撞发生

755
00:32:41,033 --> 00:32:42,065
船。

756
00:32:42,134 --> 00:32:43,400
好的，这就是我们想做的事情。

757
00:32:43,468 --> 00:32:45,335
那么我们该怎么做呢？

758
00:32:45,404 --> 00:32:48,071
我们通过下来在这里添加一个新的小行星。

759
00:32:48,139 --> 00:32:49,404
每次我们添加一个新的小行星，

760
00:32:49,473 --> 00:32:50,973
我们会说对撞机。

761
00:32:51,042 --> 00:32:53,208
的addItem [小行星）。

762
00:32:53,277 --> 00:32:54,743
当我们要去除时，同样的事情在这里。

763
00:32:54,812 --> 00:32:58,480
我们会说collider.removeItem [小行星]。

764
00:33:00,416 --> 00:33:02,549
好的，所以别忘了这两个步骤。

765
00:33:02,618 --> 00:33:06,954
其实我可以把这个代码放在这边的init旁边

766
00:33:07,022 --> 00:33:08,187
所以你可以看到。

767
00:33:08,256 --> 00:33:10,290
他们一起去。

768
00:33:10,359 --> 00:33:12,357
这两个，这三件事就在这里。

769
00:33:12,426 --> 00:33:14,359
添加一个ChildBehavior然后添加项目。

770
00:33:14,428 --> 00:33:16,161
我们会一遍又一遍地这样做

771
00:33:16,230 --> 00:33:19,097
我们将要创建的所有子行为。

772
00:33:20,333 --> 00:33:22,766
好的，现在我们有这个对撞机，但我们必须

773
00:33:22,835 --> 00:33:25,969
配置碰撞机来说明我们的碰撞。

774
00:33:26,038 --> 00:33:27,570
并记得我想要外界。

775
00:33:27,639 --> 00:33:29,705
我想让小行星与外界碰撞。

776
00:33:29,774 --> 00:33:32,174
为了好玩，我也要让小行星碰撞

777
00:33:32,243 --> 00:33:34,744
对方，好的，从这里开始。

778
00:33:34,812 --> 00:33:36,312
所以我们来看看这个样子。

779
00:33:36,380 --> 00:33:37,645
我会在这里做同样的伎俩。

780
00:33:37,714 --> 00:33:39,881
私有， private lazy var.

781
00:33:39,949 --> 00:33:43,118
我实际上要使用这个对撞机来初始化

782
00:33:43,186 --> 00:33:44,451
闭包。

783
00:33:44,520 --> 00:33:46,721
所以碰撞行动。

784
00:33:47,656 --> 00:33:48,555
而且还要=

785
00:33:48,624 --> 00:33:55,127
whoops =我要执行的闭包，好的。

786
00:33:55,196 --> 00:33:58,731
在这个关闭的内部，我会这样做

787
00:33:58,800 --> 00:34:01,300
我会让行为=那个。

788
00:34:03,571 --> 00:34:06,438
我会回来那个行为，好的。

789
00:34:06,506 --> 00:34:08,939
所以这是一种你可以初始化一个var和

790
00:34:09,008 --> 00:34:12,009
在这里做一些初始化的东西就行了。

791
00:34:12,077 --> 00:34:15,045
好的，我想要我的CollisionBehavior做什么？

792
00:34:15,114 --> 00:34:20,883
所以我想要它有一定的碰撞模式，

793
00:34:20,952 --> 00:34:22,252
所以让我们来谈谈。

794
00:34:22,320 --> 00:34:25,421
CollisionMode是一个var的行为。

795
00:34:25,489 --> 00:34:28,690
还有三种不同的方法可以设置，

796
00:34:28,759 --> 00:34:31,260
一个与一切相撞。

797
00:34:31,328 --> 00:34:33,562
所以一切都意味着一切都与一切相撞。

798
00:34:33,630 --> 00:34:35,896
边界，小行星，

799
00:34:35,965 --> 00:34:37,398
他们都相互碰撞。

800
00:34:37,467 --> 00:34:38,332
这就是我们要做的事情。

801
00:34:38,400 --> 00:34:40,734
但其他选择本来就是边界，

802
00:34:40,803 --> 00:34:42,736
这意味着它只与边界碰撞。

803
00:34:42,805 --> 00:34:44,504
我们会谈谈如何增加边界，

804
00:34:44,573 --> 00:34:46,706
bezier路径作为边界。

805
00:34:46,774 --> 00:34:50,309
或者你可以只有物品相互碰撞

806
00:34:50,378 --> 00:34:51,910
就像只有小行星相互碰撞，但是

807
00:34:51,979 --> 00:34:53,511
它们不与任何边界碰撞。

808
00:34:53,580 --> 00:34:56,381
嗯，在这里，我会碰撞两边的边界

809
00:34:56,450 --> 00:34:59,517
和彼此。

810
00:34:59,586 --> 00:35:00,117
与边界。

811
00:35:00,186 --> 00:35:01,451
现在，边界怎么样？

812
00:35:01,520 --> 00:35:03,720
我想要一个边界

813
00:35:03,789 --> 00:35:04,787
我的参考意见

814
00:35:04,856 --> 00:35:06,922
原来，有一个var只是这样做

815
00:35:06,991 --> 00:35:08,090
自动调用

816
00:35:08,159 --> 00:35:10,459
translateReferenceBoundIntoBo- undary。

817
00:35:10,528 --> 00:35:13,094
如果你设置为true，它将添加一个边界。

818
00:35:13,163 --> 00:35:15,163
您的参考视图周围是一个矩形。

819
00:35:15,232 --> 00:35:18,032
现在我们稍后将展示如何界定边界

820
00:35:18,101 --> 00:35:19,600
通过指定路径。

821
00:35:19,669 --> 00:35:22,569
像船一样，船的盾牌是一条路。

822
00:35:22,638 --> 00:35:25,839
但是现在我们在这里做一个简单的例子。

823
00:35:25,907 --> 00:35:27,640
现在，我不必在别的地方做任何事情

824
00:35:27,709 --> 00:35:28,474
我的代码

825
00:35:28,543 --> 00:35:31,143
我可以，因为我已经设置了这个小行星的行为

826
00:35:31,212 --> 00:35:33,345
我可以继续添加行为

827
00:35:33,413 --> 00:35:34,846
它只适用于小行星。

828
00:35:34,915 --> 00:35:37,115
我不必回到我的控制器，做任何事情。

829
00:35:37,183 --> 00:35:39,717
好吧，我的控制器已经创建了一个动画师

830
00:35:39,786 --> 00:35:41,518
添加了这个行为。

831
00:35:41,587 --> 00:35:42,986
所以没有什么可做的

832
00:35:43,055 --> 00:35:44,788
所以我们来看看这是什么样的。

833
00:35:44,857 --> 00:35:47,824
现在我们知道的小行星不会被遗忘，

834
00:35:47,892 --> 00:35:48,758
至少。

835
00:35:52,563 --> 00:35:53,428
好的，他们在那里。

836
00:35:53,497 --> 00:35:55,964
而且你可以看到他们正在反弹，而且

837
00:35:56,033 --> 00:35:58,132
他们正在打墙壁

838
00:35:58,201 --> 00:36:00,034
他们也是减速的方式。

839
00:36:00,103 --> 00:36:04,104
好的，那就是那个糟糕的摩擦事情。

840
00:36:04,173 --> 00:36:05,672
好的，我们怎么会修复摩擦呢？

841
00:36:05,741 --> 00:36:08,942
我们希望这些东西有点不停地跳起来

842
00:36:09,011 --> 00:36:09,709
不停止这样。

843
00:36:09,777 --> 00:36:12,411
我们希望他们觉得他们在外太空。

844
00:36:12,480 --> 00:36:15,347
那么，做摩擦我们实际上需要一种不同的方式

845
00:36:15,416 --> 00:36:18,317
的行为称为动态项目行为。

846
00:36:18,386 --> 00:36:21,620
并且一个动态的项目行为，在幻灯片中谈到它，

847
00:36:21,689 --> 00:36:23,188
是一种元行为。

848
00:36:23,257 --> 00:36:26,390
它将会描述这些东西的物理学

849
00:36:26,459 --> 00:36:30,594
当其他行为对他们行动时，工作，如对撞机，好吗？

850
00:36:30,663 --> 00:36:32,663
所以当碰撞者击中时，我们会成为

851
00:36:32,732 --> 00:36:35,899
例如，能够描述命中的弹性。

852
00:36:35,968 --> 00:36:37,534
我们可以说是否存在摩擦

853
00:36:37,603 --> 00:36:39,402
他们是否放缓，还有这样的事情。

854
00:36:39,471 --> 00:36:43,038
所以让我们创建一个，private lazy var

855
00:36:43,107 --> 00:36:46,041
我会调用我的physics，因为这是什么样的

856
00:36:46,109 --> 00:36:49,444
感觉就像你指定你的physics

857
00:36:49,513 --> 00:36:50,846
你所有的小行星评论。

858
00:36:50,914 --> 00:36:55,883
这是一个UIDynamicItem行为。

859
00:36:55,952 --> 00:36:58,485
动态之间不要混淆

860
00:36:58,554 --> 00:37:00,954
项目行为和动态行为。

861
00:37:01,023 --> 00:37:03,390
好的，动态行为是所有的根源，

862
00:37:03,458 --> 00:37:06,326
这是所有行为的超级巨人。

863
00:37:06,395 --> 00:37:07,927
这是一种特定的行为。

864
00:37:07,996 --> 00:37:10,429
就像碰撞行为是一种行为，所以

865
00:37:10,497 --> 00:37:12,230
是一个动态的项目行为，好的。

866
00:37:12,299 --> 00:37:14,633
人们混淆了他们两个

867
00:37:14,701 --> 00:37:15,600
名字相似

868
00:37:15,669 --> 00:37:20,671
但我要在这里做同样的事情，让行为

869
00:37:20,740 --> 00:37:24,542
= UIDynamicItemBehavior行为。

870
00:37:24,610 --> 00:37:28,879
我会把这个行为从这个关闭中恢复出来。

871
00:37:28,948 --> 00:37:30,214
大家明白了，对吧？

872
00:37:30,282 --> 00:37:32,749
我在这里闭包了，我回到这个行为

873
00:37:32,818 --> 00:37:35,385
从那个enclo，clo，那个闭包，我正在执行。

874
00:37:35,453 --> 00:37:37,419
然后分配给它。

875
00:37:37,488 --> 00:37:38,521
只是这样做lazy。

876
00:37:40,190 --> 00:37:41,656
好的，那么我们可以设置什么样的东西

877
00:37:41,724 --> 00:37:44,225
在这种物理学中，在这个元行为？

878
00:37:44,294 --> 00:37:47,494
那我们想要的是什么东西？

879
00:37:47,563 --> 00:37:51,465
我们来试试弹性吧。

880
00:37:51,533 --> 00:37:56,302
所以弹性说如何两件事情碰撞

881
00:37:56,371 --> 00:38:00,040
例如，它损失了多少能量。

882
00:38:00,108 --> 00:38:03,309
如果你有一个弹性，那就意味着

883
00:38:03,378 --> 00:38:06,312
他们不会失去任何能量，至少没有线性能量。

884
00:38:06,381 --> 00:38:10,015
他们，如果他们旋转，那么他们可能会失去线性能量

885
00:38:10,084 --> 00:38:12,685
增益角速度，但是

886
00:38:12,753 --> 00:38:15,153
弹性意味着它们有弹性，对吧？

887
00:38:15,222 --> 00:38:18,322
现在两个弹性就意味着它们会获得能量。

888
00:38:18,391 --> 00:38:19,056
所以他们反弹。

889
00:38:19,125 --> 00:38:20,591
现在他们要走得更快了。

890
00:38:20,659 --> 00:38:23,159
而0.5将意味着他们会放缓。

891
00:38:23,228 --> 00:38:26,563
所以一个，因为我们会让我们的小行星旋转，

892
00:38:26,631 --> 00:38:29,466
我们的小行星通常会慢下来。

893
00:38:29,534 --> 00:38:32,068
但是比以前更长的时间。

894
00:38:32,137 --> 00:38:33,769
以前我们的弹性是，我会，

895
00:38:33,838 --> 00:38:36,871
我不知道默认是什么，但它是非常低的。

896
00:38:36,940 --> 00:38:38,773
说到旋转，让我们这样做

897
00:38:38,842 --> 00:38:40,674
我们的小行星可以旋转。

898
00:38:40,743 --> 00:38:43,010
我们可以这样说，

899
00:38:43,078 --> 00:38:44,745
它允许RotationTrue。

900
00:38:44,814 --> 00:38:48,415
所以说当有碰撞时，意见可以旋转，

901
00:38:48,483 --> 00:38:50,650
好吧，就像小行星一样。

902
00:38:50,719 --> 00:38:52,418
我们当然希望。

903
00:38:52,487 --> 00:38:53,553
摩擦怎么样？

904
00:38:53,621 --> 00:38:56,522
让我们将摩擦力设为0，好吗？

905
00:38:56,591 --> 00:38:59,958
没有摩擦

906
00:39:00,026 --> 00:39:02,159
在桌面上，他们在外太空。

907
00:39:02,228 --> 00:39:05,229
而且还有一个类似的称为阻力，

908
00:39:05,298 --> 00:39:07,364
我也要设置为零。

909
00:39:07,433 --> 00:39:10,033
抵抗是多少物品抵抗

910
00:39:10,102 --> 00:39:12,035
这些力量正在应用于他们。

911
00:39:12,104 --> 00:39:13,737
所以如果你设置了很高的阻力，

912
00:39:14,939 --> 00:39:16,038
那么他们会抗拒它很多。

913
00:39:16,107 --> 00:39:17,205
现在，你为什么要阻止？

914
00:39:17,274 --> 00:39:19,674
那么你可能有一个重力场或类似的东西，

915
00:39:19,743 --> 00:39:22,177
有些事情被重力完全拉开了

916
00:39:22,245 --> 00:39:23,278
其他的东西不是。

917
00:39:23,346 --> 00:39:25,179
就像他们是气球还是东西，我不知道。

918
00:39:25,247 --> 00:39:26,847
他们，他们漂浮更多或什么。

919
00:39:26,916 --> 00:39:28,848
所以你可以控制他们的阻力。

920
00:39:28,917 --> 00:39:30,984
你可以把它们放在同一个行为中，

921
00:39:31,053 --> 00:39:33,886
像同样的重力行为，相同的碰撞行为。

922
00:39:33,955 --> 00:39:37,924
但是你可以控制他们抵制多少东西。

923
00:39:37,992 --> 00:39:39,925
好吧，所以我们不想要任何阻力，

924
00:39:39,994 --> 00:39:42,161
我们希望当他们碰撞时，充满冲击。

925
00:39:42,229 --> 00:39:44,963
所以这种物理行为，就像对撞机一样，

926
00:39:45,031 --> 00:39:49,500
必须作为一个孩子加入，它必须是和

927
00:39:49,569 --> 00:39:51,235
这些项目都必须添加到它。

928
00:39:51,304 --> 00:39:56,173
所以物理我们需要addItem这里。

929
00:39:58,310 --> 00:40:00,810
物理，哎呀，小行星，对不起，小行星。

930
00:40:00,879 --> 00:40:02,945
这是物理学在这里。

931
00:40:03,014 --> 00:40:05,481
物理学，同样的东西在这里。

932
00:40:07,051 --> 00:40:09,284
呃物理学

933
00:40:09,352 --> 00:40:11,452
你会经常忘记做这些事情，就在这里。

934
00:40:11,521 --> 00:40:15,256
你会添加很好的行为，你忘了这样做。

935
00:40:15,324 --> 00:40:16,056
而你想申请，

936
00:40:16,125 --> 00:40:18,758
当然，因为直到你添加的项目

937
00:40:18,827 --> 00:40:19,760
除非是孩子的行为和

938
00:40:19,829 --> 00:40:21,928
那么这种行为不会影响任何事情。

939
00:40:21,997 --> 00:40:23,930
好吧。所以，让我们看看这是做什么的，

940
00:40:23,999 --> 00:40:26,499
看看这张照片是否有问题添加

941
00:40:26,567 --> 00:40:27,299
行为。

942
00:40:29,103 --> 00:40:30,167
好的，是的

943
00:40:30,236 --> 00:40:33,371
看，他们并没有放慢脚步，我的意思是他们其实是，但是

944
00:40:33,439 --> 00:40:36,173
他们慢慢减慢，你不能真正地告诉和

945
00:40:36,242 --> 00:40:37,441
他们都在相互弹跳，而且

946
00:40:37,509 --> 00:40:40,544
旋转，其中一些实际上相当快。

947
00:40:41,947 --> 00:40:43,145
明白了吗？

948
00:40:43,214 --> 00:40:46,315
好吧，现在这不是一个好的小行星游戏，

949
00:40:46,384 --> 00:40:48,950
因为你，这艘船会被压碎，

950
00:40:49,019 --> 00:40:49,951
这个小行星场。

951
00:40:50,020 --> 00:40:51,385
但是我们要把我们的船放在这里。

952
00:40:51,454 --> 00:40:53,254
我们要把我们的船放在中间。

953
00:40:53,323 --> 00:40:55,056
所以，我可以告诉你盾牌是如何工作的。

954
00:40:55,125 --> 00:40:58,425
我们的船应该在这里受到打击。

955
00:40:58,494 --> 00:40:59,326
所以，我们补充一下我们的船。

956
00:40:59,394 --> 00:41:02,128
所以，我要回到我们的控制器。

957
00:41:02,197 --> 00:41:04,697
在这里我初始化我的小行星的地方

958
00:41:04,766 --> 00:41:06,498
并在那里创建我的小行星。

959
00:41:06,567 --> 00:41:08,467
我也要在这里建造我的船。

960
00:41:09,503 --> 00:41:11,536
我的船将是多大的网络？

961
00:41:11,605 --> 00:41:15,005
我想要我的船相对于大小来说是一个很好的尺寸

962
00:41:15,074 --> 00:41:18,075
我的观点是束缚，对，自己看。

963
00:41:18,144 --> 00:41:20,310
所以，我设定了一个常数，我觉得五分之一。

964
00:41:20,379 --> 00:41:24,747
所以我要让我的船只是短边的五分之一

965
00:41:24,816 --> 00:41:26,166
无论哪一边较短，我会让我的船五分之一

966
00:41:26,167 --> 00:41:27,517
我的平衡

967
00:41:27,585 --> 00:41:30,719
大小，所以我会说让船大小相等我的

968
00:41:30,788 --> 00:41:35,557
view.bounds.size.minEdge只是我的另一件事

969
00:41:35,626 --> 00:41:40,528
添加在我的，核心图形的东西，所以我会采取任何

970
00:41:40,597 --> 00:41:43,064
minEdge是和我将乘以一个常数，

971
00:41:43,133 --> 00:41:47,435
这是shipSizeToMinBoundsEdgeRatio。

972
00:41:47,504 --> 00:41:50,204
让我们去看看，然后我设定什么，

973
00:41:50,273 --> 00:41:52,739
这是我的常数，我把它设置为五分之一。

974
00:41:52,808 --> 00:41:53,540
所以，到五分之一。

975
00:41:53,609 --> 00:41:55,775
所以，这艘船是最小年龄的五分之一。

976
00:41:55,844 --> 00:41:58,244
这似乎是相当不错的。

977
00:41:58,312 --> 00:42:01,246
你知道平衡的大小，我的船可能有点

978
00:42:01,315 --> 00:42:03,549
太大了，我通过，所以我可能想玩，但是，

979
00:42:03,618 --> 00:42:06,218
我们会看到所以我现在得到了船的大小。

980
00:42:06,286 --> 00:42:07,452
现在我只需要创造船。

981
00:42:07,520 --> 00:42:08,787
这只是一个看法。

982
00:42:08,855 --> 00:42:10,554
所以，我们来这里，为它创建一个var，

983
00:42:10,623 --> 00:42:12,222
就像我们为我们的小行星领域。

984
00:42:12,291 --> 00:42:13,656
我们做var ship船。

985
00:42:13,725 --> 00:42:15,558
我们称之为宇宙飞船视图。

986
00:42:15,627 --> 00:42:18,094
我们也会暗示这样做

987
00:42:18,163 --> 00:42:18,861
解包和可选，

988
00:42:18,930 --> 00:42:21,329
因为我们将在这里开始初始化它。

989
00:42:21,398 --> 00:42:24,466
所以我们会说我们的船

990
00:42:24,535 --> 00:42:29,137
等于[SOUND]宇宙飞船视图框架。

991
00:42:29,206 --> 00:42:30,972
我们在这里做一个CGrect

992
00:42:31,041 --> 00:42:34,542
让我们以我们的船为中心

993
00:42:34,610 --> 00:42:36,443
在小行星领域。

994
00:42:36,512 --> 00:42:38,746
我们要将它放在小行星领域。

995
00:42:40,515 --> 00:42:41,948
中心

996
00:42:42,017 --> 00:42:43,449
当然，我们知道大小。

997
00:42:44,518 --> 00:42:46,451
是shipSize。

998
00:42:46,520 --> 00:42:48,019
实际上，我希望它是一个广场，所以

999
00:42:48,088 --> 00:42:50,121
我会使用一个不同的CGRect的东西，我有，

1000
00:42:50,190 --> 00:42:54,658
这是squareCenteredAt，我想我调用它。

1001
00:42:54,727 --> 00:42:57,961
如果我打了这个对，是的，SquareCenteredAt。

1002
00:42:58,030 --> 00:43:00,597
所以船将是一个以小行星为中心的广场

1003
00:43:00,666 --> 00:43:02,331
场的中心，就在小行星的中间。

1004
00:43:02,400 --> 00:43:04,066
这将是我们的shipSize

1005
00:43:04,135 --> 00:43:05,368
计算在那里

1006
00:43:05,437 --> 00:43:08,970
所以，让我们把这条船添加到我们的子视图中。

1007
00:43:09,039 --> 00:43:12,441
现在注意到我把船添加到我的self.view中

1008
00:43:12,509 --> 00:43:15,110
一个子视图，所以它是我的小行星领域的兄弟姐妹，

1009
00:43:15,179 --> 00:43:17,144
它不是我的小行星领域的子视图。

1010
00:43:17,213 --> 00:43:18,045
我的小行星真的，

1011
00:43:18,114 --> 00:43:20,280
它所拥有的唯一子视图就是这些小行星。

1012
00:43:20,349 --> 00:43:25,952
但是我决定把我的船在同一水平上。

1013
00:43:26,021 --> 00:43:27,554
这里抱怨什么呢

1014
00:43:29,657 --> 00:43:34,059
对不起，看到这里对不起，是的，view.addSubview。

1015
00:43:34,128 --> 00:43:35,561
我们必须添加到我们的self.view。

1016
00:43:35,629 --> 00:43:39,664
我们现在在我们的控制器，不看，好吗？

1017
00:43:39,733 --> 00:43:40,965
所以有我们的船。

1018
00:43:41,034 --> 00:43:43,201
我们现在去看看我们的船。

1019
00:43:43,270 --> 00:43:44,836
没有碰撞会发生。

1020
00:43:44,904 --> 00:43:48,071
我们的船没有参与小行星的行为。

1021
00:43:48,140 --> 00:43:49,372
对？我们还没有加入我们的船

1022
00:43:49,441 --> 00:43:51,274
以小行星的行为以任何方式。

1023
00:43:51,343 --> 00:43:53,409
所以有我们的船，它指向零，

1024
00:43:53,478 --> 00:43:56,745
这是向右的，小行星正在飞行。

1025
00:43:56,814 --> 00:43:59,247
他们在后面，因为船被添加到子视图

1026
00:43:59,316 --> 00:44:00,883
后来，就在前面。

1027
00:44:00,951 --> 00:44:02,550
对，我们知道我们的子视图是按顺序的

1028
00:44:02,619 --> 00:44:03,918
回到前面

1029
00:44:03,987 --> 00:44:04,652
好的。

1030
00:44:04,721 --> 00:44:07,988
所以，现在我们希望这些小行星碰撞

1031
00:44:08,057 --> 00:44:09,289
与我们的船的盾牌。

1032
00:44:09,358 --> 00:44:12,058
船的盾牌只是我们船周围的一个圆圈，

1033
00:44:12,127 --> 00:44:13,592
我们希望它在那里碰撞。

1034
00:44:13,661 --> 00:44:16,896
所以，我们将不得不添加更多的碰撞行为

1035
00:44:16,965 --> 00:44:19,598
代码在这里的行为。

1036
00:44:19,667 --> 00:44:22,367
因为现在，我们正在做的就是拥有一切

1037
00:44:22,436 --> 00:44:23,935
与一切冲突，和

1038
00:44:24,004 --> 00:44:26,570
参考范围是我们唯一的约束。

1039
00:44:26,639 --> 00:44:29,940
所以，我要通过添加另一个Func来做到这一点，

1040
00:44:30,009 --> 00:44:33,243
只是给我一个公共func称为setBoundary和

1041
00:44:33,312 --> 00:44:37,714
它会让你设置一个UIBezierPath，[COUGH] as

1042
00:44:37,783 --> 00:44:41,484
一个边界，它将会有一个名字

1043
00:44:41,553 --> 00:44:42,952
我们以后可以参考一下。

1044
00:44:43,020 --> 00:44:45,687
你会看到为什么我们需要能够做到这一点

1045
00:44:45,756 --> 00:44:49,125
那么另一件很酷的事情，如果我们添加一个处理程序怎么样

1046
00:44:49,193 --> 00:44:51,493
所以如果与边界有碰撞，

1047
00:44:51,562 --> 00:44:53,628
我们称之为我们的处理程序。

1048
00:44:53,696 --> 00:44:55,629
以这种方式使用闭包不会很酷吗？

1049
00:44:55,698 --> 00:44:57,264
所以我们来做这个处理程序。

1050
00:44:57,333 --> 00:44:58,732
处理器的类型是什么？

1051
00:44:58,801 --> 00:45:01,968
那么这只是一个空虚，返回void，

1052
00:45:02,037 --> 00:45:04,170
换句话说，没有任何论据或其他的。

1053
00:45:04,239 --> 00:45:06,739
我实际上也会选择它

1054
00:45:06,807 --> 00:45:07,940
Som你不必做一个处理程序。

1055
00:45:08,009 --> 00:45:09,141
你可以放一个边界，

1056
00:45:09,210 --> 00:45:10,442
碰撞会随之发生。

1057
00:45:10,511 --> 00:45:11,476
但是如果你不放置一个处理程序，

1058
00:45:11,545 --> 00:45:13,811
那么没有人会发现它。

1059
00:45:13,880 --> 00:45:15,446
对嘛

1060
00:45:15,515 --> 00:45:18,282
这里有多少括号呢？

1061
00:45:20,418 --> 00:45:22,051
对，好吗？

1062
00:45:22,120 --> 00:45:22,719
所以我们得到了所以，

1063
00:45:22,787 --> 00:45:25,321
我们将如何实现此setBoundary？

1064
00:45:25,390 --> 00:45:28,690
那么首先我们必须把这个边界添加到对撞机。

1065
00:45:28,759 --> 00:45:31,159
对，我们在这里遇到了这种碰撞行为。

1066
00:45:31,228 --> 00:45:34,563
我们需要添加这个新的边界，这个BezierPath为

1067
00:45:34,631 --> 00:45:36,464
一个将要再次碰撞的区域

1068
00:45:36,533 --> 00:45:38,266
反对，那很容易。

1069
00:45:38,334 --> 00:45:41,835
Collider.addBoundary。

1070
00:45:41,904 --> 00:45:43,604
当您添加它们时，边界需要一个标识符。

1071
00:45:43,605 --> 00:45:45,305
好的？

1072
00:45:45,374 --> 00:45:46,739
好的？这是有道理的，因为何时

1073
00:45:46,808 --> 00:45:47,740
碰撞发生，碰撞发生，

1074
00:45:47,809 --> 00:45:49,575
你必须说出你碰到的边界。

1075
00:45:49,644 --> 00:45:50,909
所以我们会用这个名字。

1076
00:45:50,978 --> 00:45:54,278
但请记住，这必须是一个NScopying。

1077
00:45:54,347 --> 00:45:57,715
所以，我们会像这里的字符串那样说，

1078
00:45:57,784 --> 00:46:00,284
在字符串中的数字减号都是

1079
00:46:00,353 --> 00:46:02,886
一个逃脱，我们可以在这里使用。

1080
00:46:02,955 --> 00:46:05,822
这是因为字符串可以一直是

1081
00:46:05,891 --> 00:46:07,190
一个字符串和背。

1082
00:46:07,259 --> 00:46:09,425
好的，这是特殊的关系

1083
00:46:09,493 --> 00:46:11,193
那两种情况。

1084
00:46:11,262 --> 00:46:14,463
还好，我们会在这里添加路径。

1085
00:46:14,532 --> 00:46:15,097
好的？

1086
00:46:16,800 --> 00:46:19,066
现在，唯一的这件事，

1087
00:46:19,135 --> 00:46:21,502
但是，如果有人再次设置边界呢？

1088
00:46:21,570 --> 00:46:24,705
那么我们很想删除旧的，所以

1089
00:46:24,774 --> 00:46:29,276
我也会说collider.removeBoundary，

1090
00:46:29,344 --> 00:46:33,613
以NSString的名义让它离开那里。

1091
00:46:33,681 --> 00:46:34,481
不是removeItem。

1092
00:46:36,684 --> 00:46:39,184
删除与标识符的边界。

1093
00:46:39,253 --> 00:46:42,921
命名为NNString。

1094
00:46:42,989 --> 00:46:43,689
了解？

1095
00:46:45,258 --> 00:46:47,024
好的，我打算删除边界，

1096
00:46:47,093 --> 00:46:48,525
我只是加了边界，

1097
00:46:48,594 --> 00:46:50,661
实际上，如果你指定一个路径。

1098
00:46:50,729 --> 00:46:53,530
所以，我要使这个路径是可选的。

1099
00:46:53,599 --> 00:46:55,532
然后我们将在那里展开。

1100
00:46:55,600 --> 00:46:59,969
我只会说路径不等于nil，

1101
00:47:00,038 --> 00:47:01,103
然后再加上边界。

1102
00:47:01,172 --> 00:47:02,838
这样，如果你说，设置边界为nil，

1103
00:47:02,907 --> 00:47:05,907
它将得到该名称的边界。

1104
00:47:05,976 --> 00:47:08,142
所以这是一种有一种添加方法的方法

1105
00:47:08,211 --> 00:47:09,510
删除边界。

1106
00:47:10,480 --> 00:47:11,879
现在这个处理程序呢？

1107
00:47:11,947 --> 00:47:14,714
我们必须以某种方式持有这个处理程序，以便在何时

1108
00:47:14,783 --> 00:47:17,950
碰撞发生后，我们可以调用这个处理程序。

1109
00:47:18,019 --> 00:47:20,619
所以创造这个边界的人都可以找出来

1110
00:47:20,688 --> 00:47:21,954
你在那里碰撞了

1111
00:47:22,022 --> 00:47:25,023
所以，我将在这里创建一个私人的var

1112
00:47:25,092 --> 00:47:28,626
称为碰撞处理程序，它将成为一个字典。

1113
00:47:28,695 --> 00:47:32,263
那个字典的键将是字符串和什么

1114
00:47:32,332 --> 00:47:35,633
你认为这个var或者这个价值会是吗？

1115
00:47:39,237 --> 00:47:41,805
一个函数怎么样？

1116
00:47:44,676 --> 00:47:47,143
好吧，所以我只是创建一个字典的键

1117
00:47:47,212 --> 00:47:48,810
将会成为这里的名字

1118
00:47:48,879 --> 00:47:52,080
他们的值将成为处理者。

1119
00:47:52,149 --> 00:47:55,817
好的，我知道这很多，你们中的一些人很多

1120
00:47:55,886 --> 00:47:58,353
去，真的很舒服这个想法的功能

1121
00:47:58,421 --> 00:47:59,254
只是类型。

1122
00:47:59,322 --> 00:48:03,091
这是没有什么不同，然后一个字符串在那里，好吗？

1123
00:48:03,159 --> 00:48:05,592
所以我们可以有一个充满他们的字典。

1124
00:48:05,661 --> 00:48:09,029
这是非常，非常好，易于使用。

1125
00:48:09,098 --> 00:48:11,931
所以我们想在这里做同样的事情来删除旧的。

1126
00:48:12,000 --> 00:48:14,900
所以我会说我的碰撞手段

1127
00:48:14,969 --> 00:48:16,068
[name] = nil。

1128
00:48:16,137 --> 00:48:18,771
所以我正在删除任何旧的处理程序。

1129
00:48:18,840 --> 00:48:21,540
当我把它添加到这里，有一条新的路径，

1130
00:48:21,608 --> 00:48:24,609
我只是说collisionHandlers[name] =

1131
00:48:24,678 --> 00:48:25,610
处理程序。

1132
00:48:27,647 --> 00:48:30,046
好的，所以现在我跟踪那些处理程序

1133
00:48:30,115 --> 00:48:31,581
每个这些命名的边界。

1134
00:48:31,650 --> 00:48:33,383
对，这些边界有名字，和

1135
00:48:33,451 --> 00:48:34,483
我跟踪处理程序。

1136
00:48:34,552 --> 00:48:38,487
那么当碰撞发生时如何调用这个处理程序？

1137
00:48:38,556 --> 00:48:40,156
那么我们需要了解碰撞。

1138
00:48:40,224 --> 00:48:43,424
所以这里是我们如何发现碰撞。

1139
00:48:43,493 --> 00:48:44,759
我们用一个代理来做。

1140
00:48:44,828 --> 00:48:47,561
你看，这是我们的碰撞行为的代理人。

1141
00:48:47,630 --> 00:48:50,164
所以我们要在这里走上我们的行为，

1142
00:48:50,232 --> 00:48:54,034
碰撞行为，并说它是碰撞的。

1143
00:48:54,103 --> 00:48:54,968
它不被称为委托。

1144
00:48:55,037 --> 00:48:56,869
它被称为collisionDelegate。

1145
00:48:56,938 --> 00:48:59,205
等于，我会有自己的。

1146
00:48:59,274 --> 00:49:01,808
所以这个小行星本身就会得到

1147
00:49:01,876 --> 00:49:04,142
发生碰撞的通知。

1148
00:49:04,211 --> 00:49:05,010
所以这意味着我必须是

1149
00:49:05,079 --> 00:49:09,447
一个UICollisionBehaviorDelegate这样做。

1150
00:49:09,516 --> 00:49:10,782
所有方法都是可选的。

1151
00:49:10,850 --> 00:49:14,252
所以我成功地实施了这个代理。

1152
00:49:14,320 --> 00:49:17,221
但是，当然，我想实现一种方法。

1153
00:49:17,289 --> 00:49:18,655
所以让我们看看其中的一些。

1154
00:49:18,724 --> 00:49:20,290
所以我只是在这里打字碰撞

1155
00:49:20,359 --> 00:49:21,324
我可以看到他们是什么

1156
00:49:21,392 --> 00:49:23,392
你可以看到有四个。

1157
00:49:23,461 --> 00:49:26,828
有开始和结束联系，你看，开始和

1158
00:49:26,897 --> 00:49:29,464
边界或项目的最终联系。

1159
00:49:29,533 --> 00:49:31,299
所以我可以找出项目是否碰撞或

1160
00:49:31,367 --> 00:49:33,667
我可以找出物品是否与边界碰撞。

1161
00:49:33,736 --> 00:49:36,737
当然，我想要边界碰撞，和

1162
00:49:36,806 --> 00:49:39,106
我很想要开始。

1163
00:49:39,174 --> 00:49:44,010
所以当接触开始的时候，好的，冲击首先发生，

1164
00:49:44,079 --> 00:49:45,145
我想了解一下。

1165
00:49:45,214 --> 00:49:48,548
所以我要选择这一个

1166
00:49:48,616 --> 00:49:49,281
边界。

1167
00:49:49,350 --> 00:49:52,818
我们来看看这里更多的参数

1168
00:49:52,887 --> 00:49:54,219
你可以看到他们。

1169
00:50:00,560 --> 00:50:04,962
好的，所以这是碰撞委托的方法

1170
00:50:05,031 --> 00:50:08,232
当一个项目，AsteroidView，

1171
00:50:08,301 --> 00:50:10,501
影响边界。

1172
00:50:10,570 --> 00:50:11,968
就像船的边界，或者

1173
00:50:12,037 --> 00:50:14,337
甚至参考边界的边界。

1174
00:50:14,406 --> 00:50:17,373
甚至可以在参考视图中告诉你什么时候

1175
00:50:17,442 --> 00:50:20,209
两件事情感动了，好吗？

1176
00:50:20,278 --> 00:50:21,694
现在，我们甚至可以让我们的处理程序使用CGPoint

1177
00:50:21,695 --> 00:50:23,111
哪个有点好

1178
00:50:23,179 --> 00:50:23,611
作为参数。

1179
00:50:23,680 --> 00:50:24,645
我们可以告诉这个人，

1180
00:50:24,714 --> 00:50:27,481
但是，呃，我们这里有一个笨手段。

1181
00:50:27,549 --> 00:50:30,417
这可能会更好，但我们会留下它是什么。

1182
00:50:30,486 --> 00:50:31,885
好的，那么想在这里做什么？

1183
00:50:31,953 --> 00:50:34,087
在这里我们想看看首先，

1184
00:50:34,156 --> 00:50:36,522
我想从该标识符中获取名称。

1185
00:50:36,590 --> 00:50:40,059
所以如果我可以让这个名字等于边界标识符，

1186
00:50:40,127 --> 00:50:41,794
这件事就在这里。

1187
00:50:41,863 --> 00:50:44,763
这是一个NSCopying，它也是可选的。

1188
00:50:44,832 --> 00:50:47,065
所以我会说，作为字符串。

1189
00:50:47,133 --> 00:50:49,234
所以如果我可以把这个标识符作为一个字符串，

1190
00:50:49,302 --> 00:50:51,769
这是我需要的，如果这是一个处理程序。

1191
00:50:51,837 --> 00:50:53,937
那里可能有其他标识符

1192
00:50:54,006 --> 00:50:55,439
您创建的其他边界。

1193
00:50:55,507 --> 00:50:58,308
但是如果我们要这样做的话，它必须是一个字符串。

1194
00:50:58,376 --> 00:51:02,678
然后我也要让处理程序等于我们的

1195
00:51:02,747 --> 00:51:06,849
collisionHandlers，sub这个名字，好吗

1196
00:51:07,851 --> 00:51:09,150
所以如果我能做这两件事，

1197
00:51:09,219 --> 00:51:12,821
我可以得到那个碰撞的处理程序。

1198
00:51:12,890 --> 00:51:14,488
我在这里做什么？

1199
00:51:14,557 --> 00:51:15,323
调用处理程序。

1200
00:51:18,560 --> 00:51:21,160
好的，这有点复杂

1201
00:51:21,229 --> 00:51:22,528
在这里实现。

1202
00:51:22,597 --> 00:51:24,930
我正在使用闭包和所有的东西。

1203
00:51:24,999 --> 00:51:29,034
希望你，你了解它。

1204
00:51:29,103 --> 00:51:32,838
如果你不是，你知道，确保你跟随广场

1205
00:51:32,906 --> 00:51:36,174
或在办公时间或任何时间与工作人员协商。

1206
00:51:36,243 --> 00:51:38,543
但这是一种事情，这是编码你的那种

1207
00:51:38,612 --> 00:51:40,044
想要能够在斯威夫特，可以吗？

1208
00:51:40,113 --> 00:51:43,947
使用闭包来使这样的事情发生。

1209
00:51:44,016 --> 00:51:46,584
所以这就是我们这里的公共方法

1210
00:51:46,652 --> 00:51:48,318
将在我们的控制器中使用。

1211
00:51:48,387 --> 00:51:51,654
我们需要设置边界，这是船的盾牌。

1212
00:51:51,723 --> 00:51:54,724
在处理程序中，我们将会做任何事情

1213
00:51:54,793 --> 00:51:56,458
小行星得到我们的形状。

1214
00:51:56,527 --> 00:51:57,326
所以我们来吧

1215
00:51:57,395 --> 00:51:58,961
让我们回到我们的控制器。

1216
00:51:59,030 --> 00:52:01,062
现在，我们要在哪里设定边界？

1217
00:52:01,131 --> 00:52:02,664
现在这很有趣

1218
00:52:02,732 --> 00:52:04,331
你会想我们可能想设定

1219
00:52:04,400 --> 00:52:06,366
这里在initializeIfNeeded。

1220
00:52:06,435 --> 00:52:08,201
但事实证明，我们不能这样做，或者

1221
00:52:08,270 --> 00:52:09,870
至少不仅在那里

1222
00:52:09,938 --> 00:52:10,836
为什么是这样？

1223
00:52:10,905 --> 00:52:13,139
那是因为这个边界我们是ta，

1224
00:52:13,208 --> 00:52:14,272
设置它的行为，

1225
00:52:14,341 --> 00:52:16,775
它必须在参考视图坐标系中。

1226
00:52:16,843 --> 00:52:19,944
那边界将会改变位置

1227
00:52:20,013 --> 00:52:23,280
当我们旋转我们的设备，好吗？

1228
00:52:23,349 --> 00:52:24,582
你知道旋转你的设备时，

1229
00:52:24,650 --> 00:52:25,549
你的界限改变了

1230
00:52:25,617 --> 00:52:27,884
该中心位于不同的地方。

1231
00:52:27,953 --> 00:52:29,819
好的，它的坐标是不同的。

1232
00:52:29,887 --> 00:52:31,120
所以这就是为什么我们可以，

1233
00:52:31,189 --> 00:52:34,423
每当我们的界限改变时，我们都需要重新定位我们的船。

1234
00:52:34,491 --> 00:52:36,525
所以我们将在initializeIfNeeded中做。

1235
00:52:36,594 --> 00:52:38,226
但是我们也要这样做

1236
00:52:38,295 --> 00:52:40,595
viewDidLayoutSubviews，好吗？

1237
00:52:40,664 --> 00:52:42,597
所以让我们创建一个私人的func来做到这一点。

1238
00:52:42,666 --> 00:52:44,799
我们会把它称为repositionShip，好吗？

1239
00:52:44,867 --> 00:52:47,534
这是每次船改变位置。

1240
00:52:47,603 --> 00:52:50,336
我们只能做到这一点，如果我们有一个小行星领域，

1241
00:52:50,405 --> 00:52:52,605
因为我们把这艘船放在小行星的中间。

1242
00:52:52,674 --> 00:52:53,706
所以如果我们没有小行星领域，

1243
00:52:53,775 --> 00:52:55,475
我们不知道在哪里放。

1244
00:52:55,543 --> 00:52:58,610
所以如果小行星场不等于nil，

1245
00:52:58,679 --> 00:53:00,211
那么我们可以重新定位船。

1246
00:53:00,280 --> 00:53:03,648
而我们知道船本身，

1247
00:53:03,717 --> 00:53:08,453
它的中心是小行星中心。

1248
00:53:12,025 --> 00:53:14,258
我们甚至不需要它，它是隐含的解包，对吧？

1249
00:53:14,326 --> 00:53:17,060
所以小行星中心，对吧？

1250
00:53:17,129 --> 00:53:18,962
那就是定位船，但是

1251
00:53:19,030 --> 00:53:22,365
现在我们需要在船上加上这个边界。

1252
00:53:22,434 --> 00:53:25,100
所以我们要告诉我们的小行星行动

1253
00:53:25,169 --> 00:53:26,768
设定边界。

1254
00:53:26,837 --> 00:53:29,037
现在，边界是盾牌的边界。

1255
00:53:29,106 --> 00:53:31,773
我告诉你船有这个好方法叫

1256
00:53:31,841 --> 00:53:34,241
屏蔽边界，好吗？

1257
00:53:34,310 --> 00:53:35,776
而ShieldBoundary甚至需要

1258
00:53:35,845 --> 00:53:37,278
你想要的坐标系

1259
00:53:37,346 --> 00:53:39,179
所以我们希望这是在我们的参考视图，

1260
00:53:39,248 --> 00:53:40,981
这是小行星场。

1261
00:53:41,049 --> 00:53:43,983
所以这会给我们一个描述的贝塞尔路径

1262
00:53:44,052 --> 00:53:46,552
在小行星领域的盾牌坐标

1263
00:53:46,621 --> 00:53:47,286
系统。

1264
00:53:47,354 --> 00:53:48,953
我们可以称之为任何我们想要的。

1265
00:53:49,022 --> 00:53:50,121
我有一个常数。

1266
00:53:50,190 --> 00:53:53,625
我会叫它shipBoundaryName。

1267
00:53:53,693 --> 00:53:58,228
糟糕，不是shipSize，他们，不，shipBoundaryName。

1268
00:53:58,297 --> 00:53:59,530
那就是shipBoundaryName。

1269
00:53:59,599 --> 00:54:03,099
我们将在这里使用尾随闭包语法。

1270
00:54:03,168 --> 00:54:04,201
我们把它放在这里。

1271
00:54:04,269 --> 00:54:07,404
所以让我们回到这里，大家都知道。

1272
00:54:09,574 --> 00:54:14,043
而且没有争议，所以我们真的不需要。

1273
00:54:14,111 --> 00:54:17,279
虽然我想在这里做weak self，好吗？

1274
00:54:17,347 --> 00:54:20,749
因为这可能不是一个问题

1275
00:54:20,818 --> 00:54:24,352
不知何故，这个动画师得到所有流氓和

1276
00:54:24,420 --> 00:54:26,821
[LAUGH]开始动画，我的控制器走了。

1277
00:54:26,890 --> 00:54:30,957
但是我可能不需要这么weak self，

1278
00:54:31,026 --> 00:54:32,059
几乎肯定我不会。

1279
00:54:32,127 --> 00:54:34,761
我几乎可以肯定地在这里做无知的自我。

1280
00:54:34,830 --> 00:54:38,198
但是，我要去做，只是为了乐趣。

1281
00:54:39,400 --> 00:54:41,666
所以我们在这里有weak self。

1282
00:54:41,735 --> 00:54:44,736
我们，我们这是设定边界。

1283
00:54:44,805 --> 00:54:47,639
这是我们的处理程序，当它碰撞时发生。

1284
00:54:47,707 --> 00:54:50,342
那么当小行星碰到我们时，我们要做什么呢？

1285
00:54:50,410 --> 00:54:53,877
嗯，我会自动屏蔽激活。

1286
00:54:53,946 --> 00:54:58,982
所以我要说，ship.shieldIsActive = true。

1287
00:54:59,051 --> 00:55:01,050
如果我们碰撞，巴姆，我会做的。

1288
00:55:01,119 --> 00:55:03,987
但是，我只会激活那个盾牌

1289
00:55:04,056 --> 00:55:05,955
一秒钟，好吗？

1290
00:55:06,024 --> 00:55:08,524
所以如果你有一个小行星打了你，是的，

1291
00:55:08,593 --> 00:55:09,725
我会把你的盾牌。

1292
00:55:09,794 --> 00:55:13,362
但是它会回落，如果另一个人打你，

1293
00:55:13,431 --> 00:55:14,429
它会再次回来。

1294
00:55:14,498 --> 00:55:16,964
那么我怎么会让这个盾牌回来成为

1295
00:55:17,033 --> 00:55:18,165
一秒钟不活动

1296
00:55:18,234 --> 00:55:19,733
嗯，我要用定时器

1297
00:55:19,802 --> 00:55:21,869
好的，预定的，我有一个常数。

1298
00:55:21,937 --> 00:55:24,971
它被称为我的Shield.duration，和

1299
00:55:25,040 --> 00:55:26,973
它不重复。

1300
00:55:27,042 --> 00:55:28,607
它做这个块，

1301
00:55:28,676 --> 00:55:31,844
这只是要把这个东西放回去。

1302
00:55:31,912 --> 00:55:35,981
我们也将使用尾随关闭语法。

1303
00:55:37,550 --> 00:55:42,219
所以我们只是去ship.shieldIsAc，

1304
00:55:42,288 --> 00:55:45,623
哎呀，IsActive = false，好吗？

1305
00:55:45,692 --> 00:55:47,991
所以在这里我只是把这个盾牌打开并退回。

1306
00:55:48,060 --> 00:55:50,093
现在，当然这里的船没有定义。

1307
00:55:50,162 --> 00:55:51,595
它需要是 self.ship，所以

1308
00:55:51,663 --> 00:55:55,798
我会说如果我能让船等于自己，因为

1309
00:55:55,867 --> 00:55:58,901
船本身在那里很weak，那么我会这样做。

1310
00:56:00,804 --> 00:56:05,974
现在，如果我没有收取任何费用

1311
00:56:06,043 --> 00:56:08,210
激活你的船的盾牌，

1312
00:56:08,278 --> 00:56:10,244
那么盾牌就会不断的出现

1313
00:56:10,313 --> 00:56:11,578
这不会是一场比赛。

1314
00:56:11,647 --> 00:56:14,882
好吧，所以我要给你收费一些，

1315
00:56:14,950 --> 00:56:17,083
你的盾牌有一些力量去做。

1316
00:56:17,152 --> 00:56:22,455
所以，我会说船点的船级别，等于，

1317
00:56:22,524 --> 00:56:23,422
我有一个常数，

1318
00:56:23,491 --> 00:56:28,127
也是屏蔽激活成本，好的。

1319
00:56:28,196 --> 00:56:29,861
所以，我要耗尽你的盾牌

1320
00:56:29,930 --> 00:56:31,063
每次我打开它。

1321
00:56:32,632 --> 00:56:33,864
每个人都得到这个代码？

1322
00:56:33,933 --> 00:56:36,033
这是非常简单的，显然如果我们有一个真实的

1323
00:56:36,102 --> 00:56:39,469
游戏，我们可能会有盾牌再生和

1324
00:56:39,538 --> 00:56:41,472
也许用户将不得不把他们的盾牌当时

1325
00:56:41,540 --> 00:56:43,439
他们意识到他们即将崩溃或

1326
00:56:43,508 --> 00:56:47,143
无论如何，我只是想让这个很简单

1327
00:56:47,211 --> 00:56:48,111
直接在这里

1328
00:56:50,214 --> 00:56:52,881
好的，我要做的另一件事是

1329
00:56:52,950 --> 00:56:55,349
我会自动复活

1330
00:56:55,418 --> 00:56:57,051
所以，如果你的船毁了，

1331
00:56:57,120 --> 00:56:58,219
我会带你回来的。

1332
00:56:58,287 --> 00:57:01,922
好的，再次，我们的目的在这里更好。

1333
00:57:01,990 --> 00:57:04,724
所以，我只是说当这个盾牌变回来的时候

1334
00:57:04,793 --> 00:57:09,463
如果船的盾牌水平下降了

1335
00:57:09,531 --> 00:57:11,463
为零，换句话说，它已被销毁。

1336
00:57:11,532 --> 00:57:14,900
然后，我将把船的水平设置回到100。

1337
00:57:14,969 --> 00:57:18,471
好的，全盾，繁荣，回归生活。

1338
00:57:19,673 --> 00:57:22,440
现在这个重新定位的船

1339
00:57:22,508 --> 00:57:25,710
显然需要在viewDidLayoutSubviews中发生。

1340
00:57:27,246 --> 00:57:30,047
在我创建之后，我也要定位船

1341
00:57:30,116 --> 00:57:33,850
我的船在这里，使边界得到

1342
00:57:33,918 --> 00:57:36,652
在第一次初始化时就开始创建。

1343
00:57:36,721 --> 00:57:41,357
现在有一件事要添加这艘船，是的，我们会的，

1344
00:57:41,426 --> 00:57:42,357
我们会看看它是否发生。

1345
00:57:42,426 --> 00:57:43,959
如果没有发生，我会回来做，但有一个

1346
00:57:44,028 --> 00:57:45,994
有一点问题添加这艘船与这个盾牌。

1347
00:57:46,063 --> 00:57:48,229
这可能会看到，希望跨过你的手指，

1348
00:57:48,298 --> 00:57:49,464
我们会在这里看到问题。

1349
00:57:50,867 --> 00:57:52,232
现在我们没看到，但是

1350
00:57:52,301 --> 00:57:54,500
我们的船在这里很快被摧毁了。

1351
00:57:54,569 --> 00:57:57,370
为什么我们的船被摧毁得如此之快？

1352
00:57:57,439 --> 00:57:59,372
不应该被破坏得如此之快。

1353
00:57:59,440 --> 00:58:00,773
在这里等一秒。

1354
00:58:03,444 --> 00:58:07,079
好吧，如果我们的盾牌是从以前的命中，

1355
00:58:07,148 --> 00:58:08,914
我们不会让自己再次受到损害。

1356
00:58:08,982 --> 00:58:13,485
所以在这里我要说如果船的盾牌不活跃。

1357
00:58:16,188 --> 00:58:18,555
好的，如果盾牌当前没有活动。

1358
00:58:18,624 --> 00:58:19,756
然后我会做所有这些东西。

1359
00:58:19,825 --> 00:58:21,691
但是如果盾牌当前处于活动状态。

1360
00:58:21,760 --> 00:58:23,426
然后我会忽略这个命中。

1361
00:58:23,495 --> 00:58:24,260
好的。

1362
00:58:24,328 --> 00:58:26,362
所以当我们把这个盾牌换一秒钟的时候，

1363
00:58:26,430 --> 00:58:30,432
我们在我们的船上获得了二分之一的生存价值[LAUGH]。

1364
00:58:34,337 --> 00:58:37,372
好的，现在我们看看，看看这个盾牌怎么样，

1365
00:58:37,440 --> 00:58:40,507
它比较厚，更大胆又更薄吗？

1366
00:58:40,576 --> 00:58:42,509
你可以看到它越来越小了

1367
00:58:42,578 --> 00:58:43,710
那船就爆了，对吧？

1368
00:58:43,778 --> 00:58:46,346
然后，我们自动复活，好吗？

1369
00:58:46,415 --> 00:58:48,047
所以再一次，这不会是一个很好的游戏[LAUGH]

1370
00:58:48,116 --> 00:58:50,817
因为我们已经把所有这些小行星都撞上了。

1371
00:58:50,885 --> 00:58:54,253
现在我希望的另一件事就是发生。

1372
00:58:54,322 --> 00:58:56,421
但是没有，所以我必须解释。

1373
00:58:56,490 --> 00:58:58,623
可能发生的是当我们把我们的船在这里，

1374
00:58:58,692 --> 00:59:01,359
如果盾牌内有小行星会发生什么？

1375
00:59:03,228 --> 00:59:04,294
它会永远存在，弹跳，和

1376
00:59:04,295 --> 00:59:05,361
好的？

1377
00:59:05,431 --> 00:59:06,362
破坏了船。

1378
00:59:06,431 --> 00:59:09,833
所以，为了我的游戏的目的，我不会允许的

1379
00:59:09,901 --> 00:59:12,267
一个小行星被创造在我的船是在我的船。

1380
00:59:12,336 --> 00:59:15,737
这就是为什么这个广告小行星在这里。

1381
00:59:15,806 --> 00:59:16,704
添加小行星计数。

1382
00:59:16,773 --> 00:59:20,542
它有另一个论据是排除区。

1383
00:59:20,611 --> 00:59:22,610
好吧，禁区只是一个地方

1384
00:59:22,678 --> 00:59:24,979
不要把小行星放在这里，因为我的船将要成为

1385
00:59:25,047 --> 00:59:26,346
这里基本上

1386
00:59:26,415 --> 00:59:27,480
那么我该怎么办呢？

1387
00:59:27,549 --> 00:59:29,282
我会把船坞反转。

1388
00:59:29,351 --> 00:59:35,421
这艘船到达Gastroville，是的。

1389
00:59:35,490 --> 00:59:38,757
是的，好的，对不起，我用这个转换方法，

1390
00:59:38,826 --> 00:59:42,027
在之前的演示中，我们使用了相同的一个。

1391
00:59:42,096 --> 00:59:43,695
我只是转换船的平衡，

1392
00:59:43,764 --> 00:59:45,930
其矩形从其坐标系，

1393
00:59:45,999 --> 00:59:48,132
到小行星的坐标系。

1394
00:59:48,201 --> 00:59:49,700
所以这样可以让我们得不到

1395
00:59:49,769 --> 00:59:50,800
在中间的一个小行星火山口。

1396
00:59:50,869 --> 00:59:53,904
好吧，所以让我们的游戏有点好一点，

1397
00:59:53,972 --> 00:59:56,305
因为现在，小行星正在杀死我们。

1398
00:59:56,374 --> 00:59:58,140
他们不断轰炸我们的盾牌。

1399
00:59:58,209 --> 00:59:59,575
相反，我们要做什么，

1400
00:59:59,644 --> 01:00:02,477
而不是具有引用界限的对撞机

1401
01:00:02,546 --> 01:00:04,079
这就是保持所有的小行星，

1402
01:00:04,148 --> 01:00:06,648
我们要让小行星飞走。

1403
01:00:06,717 --> 01:00:08,649
但如果他们飞行在我们的小行星之外，

1404
01:00:08,718 --> 01:00:09,950
我们要接他们

1405
01:00:10,019 --> 01:00:12,352
把它们移动到另一边，好的。

1406
01:00:12,421 --> 01:00:14,988
所以，我们将通过做包装来创建一个无限的空间

1407
01:00:15,056 --> 01:00:17,691
周围好吧，我不认为这是宇宙

1408
01:00:17,760 --> 01:00:19,792
实际上，虽然我们不知道，

1409
01:00:19,861 --> 01:00:21,426
但是，我们的宇宙将会如何工作，好的。

1410
01:00:21,495 --> 01:00:23,662
任何时候，一方面我们要包装它

1411
01:00:23,731 --> 01:00:24,329
周围到另一边。

1412
01:00:24,398 --> 01:00:26,097
而且，任何时候，我们会把它包装起来

1413
01:00:26,166 --> 01:00:27,966
底部，有点像表视图。

1414
01:00:28,034 --> 01:00:30,968
现在我们在现场只有20只小行星，但是

1415
01:00:31,037 --> 01:00:32,736
我们会不断重复使用它们。

1416
01:00:32,804 --> 01:00:34,370
我要做的另一件事是我要做

1417
01:00:34,439 --> 01:00:37,374
我的小行星场大得多，这样用户就不会注意到

1418
01:00:37,442 --> 01:00:40,676
我正在做这件事情，好的。

1419
01:00:40,745 --> 01:00:43,278
所以这两件事情会很好，很容易，

1420
01:00:43,347 --> 01:00:46,915
具有无限小行星场的快速模拟。

1421
01:00:46,984 --> 01:00:48,249
那么，我们怎么会这么做

1422
01:00:48,318 --> 01:00:51,186
这些东西环绕着，好吗？

1423
01:00:51,255 --> 01:00:53,321
我不想，这只是数学，

1424
01:00:53,390 --> 01:00:54,855
所以我不想在其中输入太多东西。

1425
01:00:54,924 --> 01:00:57,257
所以，我实际上有一点预先

1426
01:00:57,326 --> 01:01:00,093
在这里输入的东西告诉你，重新夺回。

1427
01:01:00,162 --> 01:01:01,161
所以这里就在这里。

1428
01:01:02,163 --> 01:01:03,162
好的，这是所有的代码

1429
01:01:03,231 --> 01:01:05,064
那就是重新获得，重新获得。

1430
01:01:05,133 --> 01:01:07,165
它的基础是一个计时器。

1431
01:01:07,234 --> 01:01:10,201
所以每隔半秒钟，我只会看看

1432
01:01:10,270 --> 01:01:13,738
找到外面的所有小行星

1433
01:01:13,806 --> 01:01:15,906
将它们移动到另一边。

1434
01:01:15,975 --> 01:01:16,874
好的，非常非常简单。

1435
01:01:16,942 --> 01:01:18,108
所以，添加这个计时器和

1436
01:01:18,176 --> 01:01:19,810
看看你可以在这里看到这个代码。

1437
01:01:19,878 --> 01:01:21,978
它只是寻找外面的那些。

1438
01:01:22,046 --> 01:01:26,015
它使用mod基本上，模，移动它们

1439
01:01:26,084 --> 01:01:29,018
水平或垂直回到另一边。

1440
01:01:29,087 --> 01:01:31,252
并且在这里通知，非常重要的是，

1441
01:01:31,321 --> 01:01:35,323
当我移动他们时，我告诉动画师我移动他们。

1442
01:01:35,391 --> 01:01:37,158
因为如果我不，我们说我有一个小行星，

1443
01:01:37,227 --> 01:01:39,961
在这里飞过场，我正在回去。

1444
01:01:40,029 --> 01:01:41,896
下一次你的动画师滴答作响，

1445
01:01:41,964 --> 01:01:42,962
它会在这里移动它。

1446
01:01:43,031 --> 01:01:43,896
你看到了吧

1447
01:01:43,965 --> 01:01:46,399
因为动画师，他拿着那只小行星。

1448
01:01:46,468 --> 01:01:48,100
所以，如果我把小行星移到这里，

1449
01:01:48,169 --> 01:01:49,568
我必须让动画师知道。

1450
01:01:49,636 --> 01:01:51,203
所以这就是为什么我们在这里有这条线

1451
01:01:51,271 --> 01:01:54,239
updateItem（usingCurrentState），它告诉动画师，

1452
01:01:54,307 --> 01:01:56,608
这是这个东西的新位置，不断动画化，

1453
01:01:56,676 --> 01:01:59,610
从这里，好吗？

1454
01:01:59,678 --> 01:02:01,879
了解非常重要的代码行吗？

1455
01:02:03,415 --> 01:02:06,950
因为它可能，我也保留了重新获得的数据

1456
01:02:07,019 --> 01:02:09,485
实际上是我的小行星游戏的好成绩。

1457
01:02:09,554 --> 01:02:10,719
因为我走的越快，

1458
01:02:10,788 --> 01:02:12,988
更重要的是将会发生，当然，

1459
01:02:13,057 --> 01:02:15,357
我冒着砸入东西的风险越高，

1460
01:02:15,426 --> 01:02:17,725
所以这是一个很好的风险奖励。

1461
01:02:17,794 --> 01:02:20,295
也许我可以使用重新获取计数作为或的一部分

1462
01:02:20,364 --> 01:02:23,864
我所有的得分机制还是什么。

1463
01:02:23,933 --> 01:02:26,600
所以，我有这个开始重新捕获方式的星号

1464
01:02:26,668 --> 01:02:27,367
启动计时器。

1465
01:02:27,436 --> 01:02:29,535
然后，停止定时器。

1466
01:02:29,604 --> 01:02:30,904
所以，我什么时候应该停下来

1467
01:02:30,972 --> 01:02:34,206
开始这个定时器，这样做是围绕业务？

1468
01:02:34,275 --> 01:02:37,510
很明显，如果我添加一个小行星。

1469
01:02:37,578 --> 01:02:40,445
我需要开始重新捕获，好吗？

1470
01:02:40,514 --> 01:02:42,614
因为一旦小行星进场了，

1471
01:02:42,683 --> 01:02:45,483
我们必须开始捕获，否则会松动。

1472
01:02:45,552 --> 01:02:47,785
同样地，当我删除小行星时，

1473
01:02:47,853 --> 01:02:54,057
如果我删除最后一个小行星，所以如果小行星是空的，

1474
01:02:54,126 --> 01:02:56,427
那么我想停止重新捕获。

1475
01:02:57,629 --> 01:02:59,662
但这不是全部，好的。

1476
01:02:59,730 --> 01:03:03,198
还有一个时间我们想停止这个计时器。

1477
01:03:03,267 --> 01:03:07,069
那就是动画停止了，好的。

1478
01:03:07,137 --> 01:03:10,639
如果动画师停止动画他的小行星

1479
01:03:10,708 --> 01:03:13,574
在宇宙中，我们停止重新捕获它们。

1480
01:03:13,643 --> 01:03:14,942
我们不想让我们的定时器运行。

1481
01:03:15,011 --> 01:03:19,013
那么我们怎么知道我们的动画师停了？

1482
01:03:19,082 --> 01:03:23,283
那么这是他在super实现的方法

1483
01:03:23,352 --> 01:03:25,852
这里的class，我们的超级UI动态行为

1484
01:03:25,921 --> 01:03:29,822
称为willMove，它告诉你什么时候移动

1485
01:03:29,891 --> 01:03:32,425
一个新的动态动画制作工具，包括何时移动

1486
01:03:32,494 --> 01:03:35,761
通过移动到零，所有动态动画师。

1487
01:03:35,830 --> 01:03:36,661
动态动画师

1488
01:03:36,730 --> 01:03:41,733
所以，让我们来这里吧，也许就在这里。

1489
01:03:41,802 --> 01:03:44,902
所以它被称为willMove，你可以看到它在那里。

1490
01:03:44,971 --> 01:03:47,405
我会打电话给super，因为我继承了它。

1491
01:03:47,473 --> 01:03:49,006
我不知道我的父类实际上是

1492
01:03:49,075 --> 01:03:50,775
任何事情，但我不想冒任何机会。

1493
01:03:52,278 --> 01:03:54,577
所以在这里，我在这里做什么

1494
01:03:54,646 --> 01:04:00,183
那么，如果我添加的动态动画为零。

1495
01:04:00,251 --> 01:04:01,650
这意味着动画停止了。

1496
01:04:01,719 --> 01:04:06,221
所以，我会停止重新捕获小行星，但是，

1497
01:04:06,290 --> 01:04:09,324
如果我被添加到一个动态的动画师，那不是零。

1498
01:04:09,393 --> 01:04:11,960
现在，我想开始重新捕获

1499
01:04:12,029 --> 01:04:14,595
只要我有至少一个小行星。

1500
01:04:14,664 --> 01:04:16,297
所以，我会说小行星不是空的。

1501
01:04:16,366 --> 01:04:23,371
是空的，看看那个，小马是空的。

1502
01:04:26,074 --> 01:04:26,840
如果，那就是为什么。

1503
01:04:27,842 --> 01:04:29,408
如果小行星不空，

1504
01:04:29,477 --> 01:04:31,677
然后我要开始重新捕获。

1505
01:04:31,745 --> 01:04:33,945
好的，你看，如果我的行为被添加到

1506
01:04:34,014 --> 01:04:36,081
一个动画师，从动画师移动，繁荣，我会

1507
01:04:36,149 --> 01:04:39,417
启动和停止我的计时器，也重新捕获。

1508
01:04:39,485 --> 01:04:41,185
所以在这些时候你必须考虑这些事情

1509
01:04:41,254 --> 01:04:41,885
计时器正在进行

1510
01:04:41,954 --> 01:04:43,720
你不想让这个计时器跑起来，好的。

1511
01:04:43,789 --> 01:04:46,088
你必须考虑适当的时候开始和

1512
01:04:46,157 --> 01:04:48,157
阻止他们。

1513
01:04:48,226 --> 01:04:51,126
好吧，现在我们正在重新获得，我不需要这个

1514
01:04:51,195 --> 01:04:54,096
碰撞边界这里是现在的参考，所以

1515
01:04:54,165 --> 01:04:55,797
我会发表评论。

1516
01:04:55,866 --> 01:04:58,366
我也要停下来

1517
01:04:58,435 --> 01:05:00,902
小行星相互碰撞。

1518
01:05:00,970 --> 01:05:03,404
我只会把它与船的盾牌碰撞。

1519
01:05:03,472 --> 01:05:08,575
所以，我会把它从一切都改为边界。

1520
01:05:08,644 --> 01:05:10,443
好吧，所以只会和边界碰撞，

1521
01:05:10,512 --> 01:05:12,012
小行星只会与船碰撞，

1522
01:05:12,080 --> 01:05:13,646
基本上。

1523
01:05:13,715 --> 01:05:14,580
另一件事我要做，

1524
01:05:14,649 --> 01:05:16,448
使小行星场真的很大。

1525
01:05:16,517 --> 01:05:18,283
这将使小行星更大，

1526
01:05:18,352 --> 01:05:20,452
我认为也会更好看。

1527
01:05:20,521 --> 01:05:21,685
所以，我要这样做，

1528
01:05:21,754 --> 01:05:23,721
看到我在这里的小行星。

1529
01:05:23,790 --> 01:05:26,189
你可以看到尺寸[不可思议]的大小。

1530
01:05:26,258 --> 01:05:28,558
所以我有一个常数来做更大的事情

1531
01:05:28,627 --> 01:05:32,762
我将乘以constant.asteroid字段

1532
01:05:32,830 --> 01:05:34,130
大小，好吗？

1533
01:05:34,198 --> 01:05:35,797
和小行星的场强，让我们来看看

1534
01:05:35,866 --> 01:05:37,967
看看我设置了什么，十。

1535
01:05:38,035 --> 01:05:41,203
所以，比我们的视图大十倍。

1536
01:05:41,272 --> 01:05:45,140
这是我们的小行星场将要多大。

1537
01:05:45,208 --> 01:05:46,141
现在，我为什么不做100或1000？

1538
01:05:46,209 --> 01:05:48,876
好吧，这不是自由的视图那么大。

1539
01:05:48,945 --> 01:05:53,580
视图拥有有效绘制效果的后台，

1540
01:05:53,649 --> 01:05:57,016
你不会希望它像这样无限大。

1541
01:05:57,085 --> 01:05:59,352
你想选择合理的效率大小。

1542
01:05:59,421 --> 01:06:00,953
十次没事，好的。

1543
01:06:01,022 --> 01:06:01,654
100次？ 1000次？

1544
01:06:01,722 --> 01:06:03,289
不，你不会想要去1000次。

1545
01:06:06,360 --> 01:06:09,127
好的，现在让我们来看看是否有效。

1546
01:06:13,533 --> 01:06:16,633
好的，现在这里我们在外太空。

1547
01:06:16,702 --> 01:06:18,134
那真的很大

1548
01:06:18,203 --> 01:06:19,336
这里有一些小行星。

1549
01:06:19,405 --> 01:06:21,104
他们只是这样，他们被推了

1550
01:06:21,173 --> 01:06:23,072
他们只是在徘徊。

1551
01:06:23,141 --> 01:06:25,808
这是一个比较容易管理的游戏。

1552
01:06:25,876 --> 01:06:29,111
更有可能我们可以通过这些东西来实现。

1553
01:06:29,179 --> 01:06:29,811
但是为了机动，

1554
01:06:29,880 --> 01:06:32,981
当然，我们的船需要一些引擎，好吗？

1555
01:06:33,050 --> 01:06:35,149
它需要能够移动。

1556
01:06:35,217 --> 01:06:37,618
现在我们要搬船了

1557
01:06:37,687 --> 01:06:39,653
就像一个真正的太空船。

1558
01:06:39,722 --> 01:06:41,821
真正的太空飞船如何移动，好吗？

1559
01:06:41,890 --> 01:06:43,790
它引发了它的引擎，和

1560
01:06:43,859 --> 01:06:45,524
当它发动引擎时会发生什么？

1561
01:06:45,593 --> 01:06:46,893
它加速，和

1562
01:06:46,961 --> 01:06:49,828
只要发动机起火，它就会持续加速。

1563
01:06:49,897 --> 01:06:52,331
一旦它的发动机关闭，那么会发生什么呢？

1564
01:06:53,566 --> 01:06:54,766
不再加速，但是

1565
01:06:54,835 --> 01:06:56,634
它的速度保持在外太空。

1566
01:06:56,703 --> 01:06:58,535
好的，所以没有什么可阻止的，

1567
01:06:58,604 --> 01:06:59,202
所以它只是继续下去。

1568
01:06:59,271 --> 01:07:02,239
但是它不减速，也不会加速。

1569
01:07:02,307 --> 01:07:04,941
它不会加速，但其速度保持不变。

1570
01:07:05,010 --> 01:07:06,942
所以，我们在这里做同样的事情。

1571
01:07:07,011 --> 01:07:09,845
那么我们如何加速呢？

1572
01:07:09,914 --> 01:07:11,647
像行为一样。

1573
01:07:11,716 --> 01:07:14,215
我们使用重力行为，因为重力

1574
01:07:14,284 --> 01:07:15,984
是由于重力加速，

1575
01:07:16,052 --> 01:07:18,385
由于地球的拉动，正确的，把东西拉下来。

1576
01:07:18,454 --> 01:07:21,121
他们正在以每秒9.8米的速度加速

1577
01:07:21,190 --> 01:07:23,523
我们可以在这里有同样的行为。

1578
01:07:23,592 --> 01:07:25,592
我们的重力行为是伟大的，因为我们可以

1579
01:07:25,660 --> 01:07:27,059
把它指向任何方向。

1580
01:07:27,128 --> 01:07:28,894
那么我们会有哪个方向

1581
01:07:28,963 --> 01:07:31,163
我们的重力行为点？

1582
01:07:31,231 --> 01:07:34,299
是的，是的，船的相反方向，好的。

1583
01:07:34,368 --> 01:07:36,801
这样会让所有的小行星都像以前一样移动

1584
01:07:36,870 --> 01:07:37,535
船去了这里。

1585
01:07:37,604 --> 01:07:39,403
因为我们实际上并不希望我们的船移动。

1586
01:07:39,472 --> 01:07:40,737
我们要小行星移动。

1587
01:07:40,806 --> 01:07:42,239
所以我们只是应用重力

1588
01:07:42,307 --> 01:07:44,007
船指向的方向相反。

1589
01:07:44,076 --> 01:07:46,208
这样简单，那就是加速。

1590
01:07:46,277 --> 01:07:47,576
我们将开始加速

1591
01:07:47,645 --> 01:07:48,910
那些小行星将开始移动。

1592
01:07:48,979 --> 01:07:49,878
如果我们停止加速，

1593
01:07:49,947 --> 01:07:52,781
他们会继续移动，因为没有摩擦

1594
01:07:52,850 --> 01:07:54,114
外太空。

1595
01:07:54,183 --> 01:07:55,249
所以如果我们希望他们放慢速度，

1596
01:07:55,317 --> 01:07:56,717
我们要把我们的船转过来

1597
01:07:56,786 --> 01:07:59,886
对我们的发动机起火另一个方向，好吗？

1598
01:07:59,955 --> 01:08:01,454
所以这是怎么工作的。

1599
01:08:01,523 --> 01:08:03,122
好的，让我们看看能否做到这一点

1600
01:08:03,191 --> 01:08:05,357
添加重力行为我们的行为。

1601
01:08:05,426 --> 01:08:07,560
所以我们要回去行为了。

1602
01:08:07,628 --> 01:08:09,327
在这里，我们有对撞机，我们有物理学，

1603
01:08:09,396 --> 01:08:13,865
我们要添加另一个，这将是一个lazy var

1604
01:08:13,934 --> 01:08:16,300
我会叫这个加速，

1605
01:08:16,369 --> 01:08:17,869
这不是真的重力，好的，

1606
01:08:17,937 --> 01:08:20,270
这是通过我们的发动机加速。

1607
01:08:20,339 --> 01:08:23,741
它会成为一个UIGravityBehavior，我们会的

1608
01:08:26,511 --> 01:08:33,516
也用一个关闭和初始化它

1609
01:08:33,584 --> 01:08:37,352
在这里我们会说，让行为等于一个UIGravity，

1610
01:08:37,421 --> 01:08:40,789
我继续打字图，嗯，令人惊讶，

1611
01:08:40,858 --> 01:08:42,124
术语行为。

1612
01:08:42,192 --> 01:08:44,960
好的，我们需要做些什么来初始化这个

1613
01:08:45,029 --> 01:08:47,228
重力行为像加速度一样行事？

1614
01:08:47,297 --> 01:08:50,564
那么当你创建一个GravityBehavior，默认情况下，

1615
01:08:50,633 --> 01:08:53,500
重力是1.0，这是一千

1616
01:08:53,569 --> 01:08:58,672
每秒点数平方，向下方向，好吗？

1617
01:08:58,740 --> 01:09:01,474
所以，我们不想要，我们希望重力开始

1618
01:09:01,543 --> 01:09:04,077
零，因为我们在外太空，我们只是浮动，

1619
01:09:04,145 --> 01:09:06,378
我们没有加速，我们的引擎不会。

1620
01:09:06,447 --> 01:09:10,783
所以，我们将有我们的行为。

1621
01:09:12,419 --> 01:09:16,421
现在我可以让我这样私人，像我一样添加API

1622
01:09:16,490 --> 01:09:18,656
对于我的对撞机，我设定了边界。

1623
01:09:18,725 --> 01:09:21,158
但是，我要继续前进，离开这个public。

1624
01:09:21,227 --> 01:09:22,393
那本质上呢，

1625
01:09:22,462 --> 01:09:24,894
当你离开publi想一个outlet

1626
01:09:24,963 --> 01:09:26,696
在你的控制器，或类似的东西，

1627
01:09:26,765 --> 01:09:30,966
它导出了UIGravityBehavior的整个API

1628
01:09:31,035 --> 01:09:33,468
进入你的API，因为你是公开的，所以

1629
01:09:33,537 --> 01:09:35,370
现在人们可以做任何他们想做的事情

1630
01:09:35,439 --> 01:09:38,040
到那个加速栏吧

1631
01:09:38,108 --> 01:09:40,708
抢劫行为只有几种方法或

1632
01:09:40,777 --> 01:09:42,677
几个杆的大小和角度，

1633
01:09:42,746 --> 01:09:46,146
基本上它也有矢量基本上是角度。

1634
01:09:46,215 --> 01:09:47,014
所以没有那么糟糕。

1635
01:09:47,082 --> 01:09:48,247
我们不会导出太多的API。

1636
01:09:48,316 --> 01:09:50,883
但是当我们把酒吧公开的时候，我们也想要小心点

1637
01:09:50,952 --> 01:09:54,454
我们打算让人们这样做，好吗？

1638
01:09:54,523 --> 01:09:55,120
我们做什么

1639
01:09:55,189 --> 01:09:57,322
我们将允许人们这样做。

1640
01:09:57,391 --> 01:09:59,124
所以，当我们添加一个新的行为时，

1641
01:09:59,192 --> 01:09:59,925
我们需要做什么？

1642
01:10:01,862 --> 01:10:02,392
就在这里。

1643
01:10:02,461 --> 01:10:04,361
好的，别忘了这些。

1644
01:10:04,430 --> 01:10:06,296
所以，我们再来一次。

1645
01:10:06,365 --> 01:10:08,431
child行为加速。

1646
01:10:08,500 --> 01:10:13,102
而且在这里我们还要添加所有的小行星

1647
01:10:13,171 --> 01:10:16,205
它们受到加速的影响。

1648
01:10:16,274 --> 01:10:19,508
我们必须删除项目，当它们被删除。

1649
01:10:22,780 --> 01:10:25,213
好的，别忘了那部分或者不行。

1650
01:10:25,282 --> 01:10:26,047
好的，就这样

1651
01:10:26,116 --> 01:10:29,183
现在我们有重力，让我们回到我们的控制器

1652
01:10:29,252 --> 01:10:30,517
让我们的发动机起火。

1653
01:10:30,586 --> 01:10:32,419
现在，我们要怎么着火我们的发动机？

1654
01:10:32,488 --> 01:10:36,389
我们显然需要一个手势来消防我们的发动机。

1655
01:10:36,458 --> 01:10:39,559
所以，我会用一个叫做长按的手势，好的，

1656
01:10:39,627 --> 01:10:42,594
一个长按是一个你按下的新闻。

1657
01:10:42,663 --> 01:10:44,597
只要你坚持下去，它就会继续发射。

1658
01:10:44,665 --> 01:10:46,831
所以这是一个持续的姿态，像一个泛手势或

1659
01:10:46,900 --> 01:10:48,533
这样的东西

1660
01:10:48,601 --> 01:10:52,070
但你不，只是，你按住，好吗？

1661
01:10:52,139 --> 01:10:54,205
非常非常类似于平移手势。

1662
01:10:54,274 --> 01:10:55,939
但是长按将被配置为

1663
01:10:56,008 --> 01:10:58,609
其他的事情，等到你认识了多久，

1664
01:10:58,677 --> 01:11:00,176
我实际上会设置为零

1665
01:11:00,245 --> 01:11:02,878
它立即认出我的手指向下。

1666
01:11:02,947 --> 01:11:05,247
你也可以长时间做一些事情，如果你移动它，

1667
01:11:05,316 --> 01:11:06,082
它停止工作。

1668
01:11:06,150 --> 01:11:08,450
当然，我们希望我们的长期保持

1669
01:11:08,518 --> 01:11:11,286
跟随它只是一个平移手势。

1670
01:11:11,354 --> 01:11:12,053
但你可以这样做

1671
01:11:12,122 --> 01:11:14,921
如果你把它移动太远，现在它停止射击，长按

1672
01:11:14,990 --> 01:11:16,557
这就是差异。

1673
01:11:16,625 --> 01:11:17,657
我只想向你展示

1674
01:11:17,726 --> 01:11:19,659
你可以看到一个泛手势，它看起来像什么。

1675
01:11:19,727 --> 01:11:21,961
所以我们回到我们这里的故事板

1676
01:11:22,029 --> 01:11:22,762
添加那个平移手势。

1677
01:11:22,831 --> 01:11:24,363
我会把它添加到故事板而不是

1678
01:11:24,432 --> 01:11:25,330
在代码中。

1679
01:11:25,399 --> 01:11:27,632
所以这里是我的控制器在这里，我要下去了

1680
01:11:27,701 --> 01:11:29,833
通过搜索手势找到它。

1681
01:11:29,902 --> 01:11:32,470
如果你下来这些东西在底部有Tap，Pinch，

1682
01:11:32,538 --> 01:11:33,904
旋转，滑动。

1683
01:11:33,973 --> 01:11:36,039
在这里，Long Press，我要把它拖出来，

1684
01:11:36,107 --> 01:11:38,174
我会把它应用到我的self.view。

1685
01:11:38,243 --> 01:11:41,077
所以我的self.view将会处理这个姿态。

1686
01:11:41,146 --> 01:11:43,378
好的，我的控制器会得到它，对不起，

1687
01:11:43,447 --> 01:11:46,215
self.view将会认识到这个姿态

1688
01:11:46,284 --> 01:11:49,117
我的控制器将会处理这个手势

1689
01:11:49,186 --> 01:11:51,919
引起我们的船燃烧其发动机和

1690
01:11:51,988 --> 01:11:54,989
导致加速度增加。

1691
01:11:55,058 --> 01:11:57,591
并记住，当我们放下，拖到这里，

1692
01:11:57,660 --> 01:12:00,961
它在这里加起来，我可以点击它，我甚至可以检查它。

1693
01:12:01,030 --> 01:12:03,563
这里是我可以说最短持续时间的地方

1694
01:12:03,632 --> 01:12:06,900
零或容差多少点

1695
01:12:06,968 --> 01:12:10,737
你想允许它在停止射击之前移动。

1696
01:12:10,806 --> 01:12:13,706
这个人把他们的手指移开了，或者是什么。

1697
01:12:13,775 --> 01:12:15,908
你可以在这里做所有这一切。

1698
01:12:15,976 --> 01:12:17,475
而我也要这样做。

1699
01:12:17,544 --> 01:12:20,711
我会控制拖动它来导致动作发生。

1700
01:12:20,780 --> 01:12:22,747
我们来吧，让我们把它放在这里。

1701
01:12:22,815 --> 01:12:25,015
所以我们将控制拖到这里。

1702
01:12:25,084 --> 01:12:26,784
它会做一个动作。

1703
01:12:26,853 --> 01:12:28,418
这将是LongPressGesture

1704
01:12:28,487 --> 01:12:29,252
参数。

1705
01:12:29,320 --> 01:12:32,021
我们会把这个燃烧称为我们要燃烧的东西

1706
01:12:32,090 --> 01:12:33,389
这里的发动机好吗？

1707
01:12:33,458 --> 01:12:36,225
那么这里会发生什么，我的手指下降，

1708
01:12:36,294 --> 01:12:39,060
我要把船转向我的手指，

1709
01:12:39,129 --> 01:12:40,529
打开引擎。

1710
01:12:40,597 --> 01:12:42,997
当我放开时，我会关掉发动机。

1711
01:12:43,065 --> 01:12:44,665
离开这艘船的任何方向，和

1712
01:12:44,734 --> 01:12:46,399
关掉它，它可以开始漂流。

1713
01:12:46,468 --> 01:12:49,402
好吧，按下手指，船快快转过来，

1714
01:12:49,471 --> 01:12:51,371
你知道，如果我在做一个真正的应用程序，

1715
01:12:51,439 --> 01:12:53,139
我可能会有这样的动画，但是

1716
01:12:53,208 --> 01:12:54,574
我会在那里有一个混蛋，

1717
01:12:54,642 --> 01:12:56,575
但你们知道如何做观看动画。

1718
01:12:56,644 --> 01:12:58,610
你可以很容易地使旋转动画。

1719
01:12:59,613 --> 01:13:00,311
这就是它的工作原理。

1720
01:13:00,380 --> 01:13:02,880
所以你按住，它会加速

1721
01:13:02,949 --> 01:13:05,649
在任何你想做的方向，想在那里做。

1722
01:13:07,052 --> 01:13:08,784
好的，让我们回到我们的控制器

1723
01:13:08,853 --> 01:13:09,853
实现这个刻录。

1724
01:13:11,022 --> 01:13:12,454
所以这里是我们的烧伤在这里。

1725
01:13:12,523 --> 01:13:13,655
那么烧伤怎么样呢？

1726
01:13:13,724 --> 01:13:16,524
嗯，我要打开sender.state。

1727
01:13:16,593 --> 01:13:18,192
这是识别状态。

1728
01:13:18,261 --> 01:13:22,663
从开始的时候开始，每一次都发生变化

1729
01:13:22,731 --> 01:13:25,732
我要把船转向手指，

1730
01:13:25,801 --> 01:13:27,667
相信与否，我可以在一行代码中做到这一点。

1731
01:13:27,736 --> 01:13:29,936
好的，我做错了什么？

1732
01:13:30,005 --> 01:13:32,505
可能还不够，是的。

1733
01:13:32,574 --> 01:13:35,041
好的，我该怎么办？

1734
01:13:35,109 --> 01:13:37,075
我会说ship.direction，和

1735
01:13:37,144 --> 01:13:41,179
我想把它设置在我手指的相对位置

1736
01:13:41,247 --> 01:13:45,550
船的中心为一角度，即0到2 pi角。

1737
01:13:45,619 --> 01:13:48,519
所以我要做的第一件事是我已经添加了

1738
01:13:48,588 --> 01:13:51,321
核心图形东西一种减去两点的方式

1739
01:13:51,390 --> 01:13:53,891
在两点之间得到一个向量，所以

1740
01:13:53,960 --> 01:13:55,525
你只是用减去做。

1741
01:13:55,594 --> 01:13:57,860
所以我会说这是，

1742
01:13:57,929 --> 01:14:02,298
确保我在这里使用正确的变量名称，我们做，

1743
01:14:02,367 --> 01:14:06,969
是的，好的，所以这是发件人的位置

1744
01:14:07,038 --> 01:14:10,772
我们的self.view，对，这是我们的控制器。

1745
01:14:10,841 --> 01:14:12,807
减少船的中心。

1746
01:14:12,876 --> 01:14:16,244
所以这给了我两个之间的CG矢量矢量，和

1747
01:14:16,313 --> 01:14:18,980
向量，我添加了一个称为角度的方法

1748
01:14:19,048 --> 01:14:22,016
其将该向量转换成零两个π角。

1749
01:14:22,085 --> 01:14:24,051
所以你看我怎么能让这真的很酷

1750
01:14:24,119 --> 01:14:27,321
一行代码，如果我有这些旧的CG扩展。

1751
01:14:27,390 --> 01:14:29,022
所以这是什么时候考虑的

1752
01:14:29,090 --> 01:14:30,489
你也在编写代码。

1753
01:14:30,558 --> 01:14:33,192
然后当然我也想燃烧，我想转身

1754
01:14:33,261 --> 01:14:35,861
在我的发动机上，当这个数字出来了。

1755
01:14:35,930 --> 01:14:39,431
所以我需要一个私人的func烧伤，这样做。

1756
01:14:39,499 --> 01:14:42,534
我也需要一个私人的func endBurn。

1757
01:14:42,602 --> 01:14:45,637
因为当我抬起手指时，需要停下来，

1758
01:14:45,705 --> 01:14:48,705
在结束的情况下。

1759
01:14:48,774 --> 01:14:50,574
endBurn，好吗？

1760
01:14:50,642 --> 01:14:53,076
否则我们会忽略，好吗？

1761
01:14:53,145 --> 01:14:55,378
就是这样了。那是我的整个烧伤，

1762
01:14:55,447 --> 01:14:56,178
超级简单

1763
01:14:56,247 --> 01:14:58,347
那么当我们燃烧时会发生什么？

1764
01:14:58,415 --> 01:15:01,650
那么我们需要设定加速度的重力行为

1765
01:15:01,719 --> 01:15:03,886
成为我船的相反方向。

1766
01:15:03,954 --> 01:15:08,656
我也想告诉我的船，它的发动机是射击。

1767
01:15:08,725 --> 01:15:11,058
好的，这只是一个图形的东西

1768
01:15:11,127 --> 01:15:13,928
它画出了从后面出来的小火焰。

1769
01:15:13,996 --> 01:15:15,295
这就是这样。

1770
01:15:15,364 --> 01:15:19,799
所以现在我要说我的小行星行为，

1771
01:15:19,868 --> 01:15:21,067
加速。

1772
01:15:21,136 --> 01:15:29,743
[SOUND] Angle等于我的船的方向减去什么？

1773
01:15:33,581 --> 01:15:36,081
Pi，对吧？

1774
01:15:36,150 --> 01:15:37,615
零到两个pi一路顺风，

1775
01:15:37,684 --> 01:15:39,851
所以pi是这个圈子的一半。

1776
01:15:41,221 --> 01:15:44,888
然后我的小行星行为大小。

1777
01:15:44,957 --> 01:15:47,157
所以对于烧伤的大小，

1778
01:15:47,226 --> 01:15:50,493
这是我们需要的。

1779
01:15:50,562 --> 01:15:51,761
抱歉。加速。

1780
01:15:51,830 --> 01:15:53,362
这是我们需要玩的东西

1781
01:15:53,431 --> 01:15:54,897
得到正确的一个。

1782
01:15:54,966 --> 01:15:56,064
我有一个常数，所以

1783
01:15:56,133 --> 01:15:58,133
我可以在常数上工作。

1784
01:15:59,235 --> 01:16:00,334
你知道，我在家里开发我的

1785
01:16:00,403 --> 01:16:01,635
应用程序我称为刻录加速，

1786
01:16:01,704 --> 01:16:04,405
我认为这是什么是燃烧加速？

1787
01:16:04,474 --> 01:16:06,840
好吧，.07，每秒秒。

1788
01:16:06,909 --> 01:16:09,176
这不是很轻的烧伤。

1789
01:16:09,244 --> 01:16:11,010
但是，你知道，当你握住那根手指的时候，

1790
01:16:11,079 --> 01:16:13,646
那东西要开始越来越快，速度越来越快，

1791
01:16:13,715 --> 01:16:16,148
更快，你不断加速，好吗？

1792
01:16:16,217 --> 01:16:17,249
这不只是你要快点

1793
01:16:17,317 --> 01:16:18,916
你越来越快，

1794
01:16:18,985 --> 01:16:21,485
你握住那根手指的时间越长。

1795
01:16:21,554 --> 01:16:23,955
现在最后的烧伤就是告诉船上的发动机

1796
01:16:24,023 --> 01:16:25,222
不再射击

1797
01:16:26,926 --> 01:16:30,026
我们将使小行星的行为加速

1798
01:16:30,095 --> 01:16:31,561
幅度恢复到零。

1799
01:16:32,764 --> 01:16:34,029
所以我们停止加速。

1800
01:16:34,098 --> 01:16:35,897
我们会离开船

1801
01:16:35,966 --> 01:16:37,365
指向它指向哪一种方式。

1802
01:16:37,434 --> 01:16:40,668
每个人都喜欢这里的一点点代码？

1803
01:16:40,737 --> 01:16:43,671
所以我们需要做的是让这艘船移动。

1804
01:16:51,914 --> 01:16:53,613
好的，所以我们走吧。

1805
01:16:53,682 --> 01:16:54,847
我要开始加速了

1806
01:16:54,916 --> 01:16:56,682
在顶部的这个家伙。

1807
01:16:56,751 --> 01:16:59,785
看，看他怎么来我，不，你是。j

1808
01:16:59,854 --> 01:17:01,286
好的，我会继续加速。

1809
01:17:01,355 --> 01:17:04,990
现在你会开始看到小行星真的被我撕裂了

1810
01:17:05,058 --> 01:17:08,660
更快，更快，更快的方向在那里。

1811
01:17:08,728 --> 01:17:09,693
看到那个

1812
01:17:09,762 --> 01:17:11,829
现在如果我想慢下来，

1813
01:17:11,898 --> 01:17:16,233
我要把我的船转过来，放慢脚步，好吗？

1814
01:17:16,302 --> 01:17:17,868
我加速了对方，太晚了，

1815
01:17:17,936 --> 01:17:19,535
在我这样做之前我被毁了。

1816
01:17:19,604 --> 01:17:20,703
但它仍然持续放缓。

1817
01:17:20,772 --> 01:17:23,338
慢下来，慢下来，慢下来。

1818
01:17:23,407 --> 01:17:25,908
好的，现在我开始走另一个方向了，好吗？

1819
01:17:25,976 --> 01:17:28,410
终于赶上了那个，现在他们开始了

1820
01:17:28,479 --> 01:17:31,545
另一方面，所以我在这里继续加速。

1821
01:17:31,614 --> 01:17:35,049
我又被毁了，好吗？

1822
01:17:35,118 --> 01:17:36,183
每个人都看到有效的方式吗？

1823
01:17:36,252 --> 01:17:38,051
现在如果你真的玩实际的游戏，

1824
01:17:38,120 --> 01:17:40,019
你不会做这个巨大的加速。

1825
01:17:40,088 --> 01:17:42,822
如果你在做sh，小小的动作，移动，微小的动作。

1826
01:17:42,891 --> 01:17:44,757
寻找，事情来了，

1827
01:17:44,826 --> 01:17:48,428
再多尝试去另一个方向等

1828
01:17:51,365 --> 01:17:53,164
我有一个时间再多一点。

1829
01:17:53,233 --> 01:17:58,102
我想，我会做一个真正的快速，这就是如果

1830
01:17:58,171 --> 01:18:00,872
你注意到我按住这个东西开始加速，

1831
01:18:00,940 --> 01:18:03,641
一些小行星的速度非常快。

1832
01:18:03,709 --> 01:18:06,510
我的意思就是这样快，你几乎看不到他们，

1833
01:18:06,579 --> 01:18:08,511
他们只是眨了眨眼。

1834
01:18:08,580 --> 01:18:11,314
这是我们必须解决的另一个问题是不让我们

1835
01:18:11,383 --> 01:18:13,383
小行星停在中间。

1836
01:18:13,451 --> 01:18:17,052
但那超级笨蛋快的小行星，我们不想那样，

1837
01:18:17,121 --> 01:18:18,120
因为在某些时候他们会这样

1838
01:18:18,189 --> 01:18:19,854
快，用户甚至不能看到他们，所以

1839
01:18:19,923 --> 01:18:20,621
他们没有用。

1840
01:18:20,690 --> 01:18:21,556
他们甚至不在那里。

1841
01:18:21,624 --> 01:18:24,592
那么如果我们对我们的小行星施加限速呢？

1842
01:18:24,660 --> 01:18:27,695
因为我们如何对我们的小行星施加限速

1843
01:18:27,763 --> 01:18:30,263
我们可以无限加快我们的转移速度和速度，

1844
01:18:30,332 --> 01:18:32,365
而且速度更快，那么我们怎么能限速呢？

1845
01:18:32,434 --> 01:18:35,167
那么我们要做的是限速的方式是我们要去的

1846
01:18:35,236 --> 01:18:36,335
上限线性加速，

1847
01:18:36,404 --> 01:18:40,072
线速度而不是项目。

1848
01:18:40,141 --> 01:18:42,073
如果你从幻灯片中记得，

1849
01:18:42,142 --> 01:18:45,042
这个动态项目行为就在这里，

1850
01:18:45,111 --> 01:18:48,312
它知道所有项目的线速度是多少，

1851
01:18:48,381 --> 01:18:51,749
它可以设置其项目的线速度。

1852
01:18:51,817 --> 01:18:54,318
所以，在init这里，那些是init，

1853
01:18:54,386 --> 01:18:58,422
我实际上会在这里设定一个速度限制。

1854
01:18:58,490 --> 01:19:01,124
好的，这么一小段代码

1855
01:19:01,193 --> 01:19:03,392
设置所有项目的速度限制。

1856
01:19:03,461 --> 01:19:06,896
这个东西怎么工作，好吗？

1857
01:19:06,964 --> 01:19:08,396
首先，我必须要有一个var，

1858
01:19:08,465 --> 01:19:10,965
这是speedLimit，它是一个CGFloat，和

1859
01:19:11,034 --> 01:19:14,803
我要把它设置为每秒300点，好吗？

1860
01:19:14,871 --> 01:19:17,705
所有这些，linearVelocity是你每秒的点数。

1861
01:19:17,773 --> 01:19:21,041
它的工作原理就是获得linearVelocity

1862
01:19:21,110 --> 01:19:24,111
对于使用此linearVelocity方法的项目。

1863
01:19:24,180 --> 01:19:26,846
然后将过速计算为负值

1864
01:19:26,915 --> 01:19:28,114
数，好吗？

1865
01:19:28,183 --> 01:19:30,083
通过减去速度限制，

1866
01:19:30,152 --> 01:19:33,285
从速度限制中减去速度。

1867
01:19:33,354 --> 01:19:36,255
将其从零开始，因此它总是负数。

1868
01:19:36,323 --> 01:19:39,291
然后再加上负数

1869
01:19:39,360 --> 01:19:40,258
线速度。

1870
01:19:40,327 --> 01:19:44,162
总是，随着小行星试图走得更快

1871
01:19:44,230 --> 01:19:45,062
比限速，

1872
01:19:45,131 --> 01:19:47,631
它通过添加足够的线速度来减缓其回落，

1873
01:19:47,700 --> 01:19:49,667
负线速度减慢。

1874
01:19:51,836 --> 01:19:55,305
而且，我们做了这一切，顺便说一句，这个动作的事情。

1875
01:19:55,373 --> 01:19:59,108
记住我们可以执行的动作var

1876
01:19:59,177 --> 01:20:03,512
每一次代码行为都是一个代码块

1877
01:20:03,581 --> 01:20:06,181
所以物理学一直都在行动，因为

1878
01:20:06,250 --> 01:20:08,416
你知道物理学一直在生效。

1879
01:20:08,485 --> 01:20:09,684
所以现在如果我加速，

1880
01:20:09,753 --> 01:20:14,055
无论如何，即使我把这个引擎全速降下来，你也是如此

1881
01:20:14,123 --> 01:20:15,855
可以看到这些东西，就像那里一样快。

1882
01:20:15,924 --> 01:20:17,591
他们已经达到了速度限制，

1883
01:20:17,660 --> 01:20:20,360
这似乎是每秒300点左右。

1884
01:20:20,429 --> 01:20:21,227
这个屏幕，

1885
01:20:21,296 --> 01:20:23,462
我不知道，这可能是一千分。

1886
01:20:23,531 --> 01:20:25,697
约3秒钟，或

1887
01:20:25,766 --> 01:20:28,733
比一点点要少一点。

1888
01:20:28,802 --> 01:20:31,102
好的，所以这个动作允许这样做。

1889
01:20:31,171 --> 01:20:32,836
现在，这是执行了很多，

1890
01:20:32,905 --> 01:20:35,707
因为这个动作发生了很多。

1891
01:20:35,775 --> 01:20:37,808
所以，我们希望这个代码是非常有效的。

1892
01:20:37,877 --> 01:20:40,844
我甚至可能在这里走得很远，不调用

1893
01:20:40,913 --> 01:20:44,113
addLinearVelocity如果这两个数字都为零。

1894
01:20:44,182 --> 01:20:46,048
我不知道是否addLinearVelocity

1895
01:20:46,117 --> 01:20:48,150
如果都是零，做任何事情。

1896
01:20:48,219 --> 01:20:51,119
但我希望这个小事情变得如此之快

1897
01:20:51,188 --> 01:20:54,523
我不想在那里有任何机会，我必须这样做。

1898
01:20:54,592 --> 01:20:56,291
我不能得到linearVelocity，否则和

1899
01:20:56,360 --> 01:20:58,393
我必须做这个小小的小计算，所以

1900
01:20:58,462 --> 01:20:59,259
我不担心那些，

1901
01:20:59,328 --> 01:21:00,828
但这个也许我会选择。

1902
01:21:02,664 --> 01:21:03,930
好的，就这样

1903
01:21:03,999 --> 01:21:04,997
这就是动态动画。

1904
01:21:05,066 --> 01:21:09,035
希望，嘿，这很有趣，随意拿吧

1905
01:21:09,104 --> 01:21:12,070
并添加一些功能，如果你想要的。

1906
01:21:12,139 --> 01:21:13,838
但希望你学到了所有的东西

1907
01:21:13,907 --> 01:21:15,006
我们需要在那里做

1908
01:21:15,075 --> 01:21:17,642
并确保希望你们都提交你的

1909
01:21:18,878 --> 01:21:20,110
提案和所有这些。

1910
01:21:20,179 --> 01:21:22,145
并确保您正在开始该最终项目。

1911
01:21:22,214 --> 01:21:23,479
不要等到最后一分钟。

1912
01:21:23,548 --> 01:21:24,613
使用填字游戏水槽，

1913
01:21:24,682 --> 01:21:29,018
益智心态哪里让事情反刍，好吗？

1914
01:21:29,087 --> 01:21:29,752
下次再见。

1915
01:21:31,221 --> 01:21:41,529
>>更多请访问stanford.edu。

